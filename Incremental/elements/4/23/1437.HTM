<b> : </b><A name="3.6 Viewstamped Replication"></A><A name="3.6 Viewstamped Replication1"></A>Viewstamped <SPAN style="LETTER-SPACING: 1pt"></SPAN>Replication</H2></LI></OL></OL>
<P class=western style="MARGIN-TOP: 0.1in; LINE-HEIGHT: 100%; MARGIN-RIGHT: 0.27in">VR provides state machine replication in an asynchronous network like the Internet and<SPAN style="LETTER-SPACING: 0.1pt"> </SPAN>handles nodes failures.<SPAN style="LETTER-SPACING: 0.1pt"> </SPAN>VR code contains logic for maintaining a consensus among the<SPAN style="LETTER-SPACING: 0.1pt"> </SPAN>majority of replicas for each operation. VR proxy sits between the real application clients<SPAN style="LETTER-SPACING: 0.1pt"> </SPAN>and handles its request.<SPAN style="LETTER-SPACING: 0.1pt"> </SPAN>It shares the configuration state such as current view number,<SPAN style="LETTER-SPACING: 0.1pt"> </SPAN>current<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>primary<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>with<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>replicas.<SPAN style="LETTER-SPACING: 0.3pt"> </SPAN>The<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>VR<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>protocol<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>can<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>be<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>broadly<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>divided<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>into<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>three<SPAN style="LETTER-SPACING: 1.3pt"> </SPAN>modes<SPAN style="LETTER-SPACING: -2.5pt"> </SPAN>of<SPAN style="LETTER-SPACING: 1pt"> </SPAN>operations:</P>
<OL>
<LI>
<P style="LINE-HEIGHT: 100%; MARGIN-RIGHT: 0.27in" align=justify><FONT style="FONT-SIZE: 11pt" size=2><FONT style="FONT-SIZE: 11pt" size=2><B>Normal</B></FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.2pt"><B> </B></SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2><B>Operation</B></FONT><FONT style="FONT-SIZE: 11pt" size=2>:</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>In</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>this</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>mode,</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>the</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>primary</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>replica</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>accepts</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>an</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>operation</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 2pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>from</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: -2.5pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>the VR proxy and queues them for replicating onto at least f+1 replicas (including itself).</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>Once the operation is logged on majority of replica, it is committed on the primary and is</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>executed</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>against</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>the</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>application</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>service</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>and</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>the</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>response</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>is</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>updated</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>to</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>client.</FONT></FONT></P>
<LI>
<P style="MARGIN-TOP: 0.02in; PAGE-BREAK-BEFORE: always; LINE-HEIGHT: 100%; MARGIN-RIGHT: 0.27in" align=justify><FONT style="FONT-SIZE: 11pt" size=2><FONT style="FONT-SIZE: 11pt" size=2><B>View Change</B></FONT><FONT style="FONT-SIZE: 11pt" size=2>: If the primary goes down, the replicas will have timeout alerts</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>and will start the view change algorithm. Each replica will send StartViewChange to all</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>replicas,</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>and</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>when</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>a</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>replicas</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>f</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>get</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>such</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>requests,</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>it</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>sends</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>a</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>DoViewChange</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>message</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1.6pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>to</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: -2.5pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>the new primary. The new primary waits for f+1 DoViewChange message and picks the</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>most updated logs from this call. It then sends StartView to all the replica and resume</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>operation in normal mode again.</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>Since log state is transferred in multiple messages, this</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>phase has high throughput. Checkpointing the logs will be used to decrease the amount of</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>exchanged</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.8pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>bytes.</FONT></FONT></P>
<LI>
<P style="LINE-HEIGHT: 100%; MARGIN-RIGHT: 0.27in" align=justify><FONT style="FONT-SIZE: 11pt" size=2><FONT style="FONT-SIZE: 11pt" size=2><B>StateRecovery</B></FONT><FONT style="FONT-SIZE: 11pt" size=2>:When a replica is joined back after a failure, it catches up with the</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 0.1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>latest</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>log</FONT><FONT style="FONT-SIZE: 11pt" size=2><SPAN style="LETTER-SPACING: 1pt"> </SPAN></FONT><FONT style="FONT-SIZE: 11pt" size=2>through.</FONT></FONT></P></LI></OL>
<P class=western style="MARGIN-TOP: 0.01in; MARGIN-LEFT: 0in" align=left><BR></P>
<OL start=3>
<OL start=7>
<LI>