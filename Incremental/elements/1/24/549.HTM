<b> : </b>Command number definitions<A title="Permalink to this heading" class=headerlink style="TEXT-DECORATION: none; COLOR: rgb(221,221,221); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 4px; PADDING-RIGHT: 4px; VISIBILITY: hidden" href="https://docs.kernel.org/driver-api/ioctl.html#command-number-definitions"></A></H2>
<P style="LINE-HEIGHT: 1.4em; hyphens: auto">The command number, or request number, is the second argument passed to the ioctl system call. While this can be any 32-bit number that uniquely identifies an action for a particular driver, there are a number of conventions around defining them.</P>
<P style="LINE-HEIGHT: 1.4em; hyphens: auto"><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: Consolas, Menlo, "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace; COLOR: rgb(34,34,34); BACKGROUND-COLOR: rgb(236,240,243)'><SPAN class=pre style="WHITE-SPACE: nowrap; hyphens: none">include/uapi/asm-generic/ioctl.h</SPAN></CODE><SPAN>&nbsp;</SPAN>provides four macros for defining ioctl commands that follow modern conventions:<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: Consolas, Menlo, "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace; COLOR: rgb(34,34,34); BACKGROUND-COLOR: rgb(236,240,243)'><SPAN class=pre style="WHITE-SPACE: nowrap; hyphens: none">_IO</SPAN></CODE>,<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: Consolas, Menlo, "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace; COLOR: rgb(34,34,34); BACKGROUND-COLOR: rgb(236,240,243)'><SPAN class=pre style="WHITE-SPACE: nowrap; hyphens: none">_IOR</SPAN></CODE>,<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: Consolas, Menlo, "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace; COLOR: rgb(34,34,34); BACKGROUND-COLOR: rgb(236,240,243)'><SPAN class=pre style="WHITE-SPACE: nowrap; hyphens: none">_IOW</SPAN></CODE>, and<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: Consolas, Menlo, "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace; COLOR: rgb(34,34,34); BACKGROUND-COLOR: rgb(236,240,243)'><SPAN class=pre style="WHITE-SPACE: nowrap; hyphens: none">_IOWR</SPAN></CODE>. These should be used for all new commands, with the correct parameters:</P>
<DL class=simple style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px">
<DT>_IO/_IOR/_IOW/_IOWR 
<DD style="MARGIN-BOTTOM: 10px; MARGIN-TOP: 3px; MARGIN-LEFT: 30px; LINE-HEIGHT: 1.4em; hyphens: auto">
<P style="MARGIN-TOP: 0px; LINE-HEIGHT: 1.4em; hyphens: auto">The macro name specifies how the argument will be used. It may be a pointer to data to be passed into the kernel (_IOW), out of the kernel (_IOR), or both (_IOWR). _IO can indicate either commands with no argument or those passing an integer value instead of a pointer. It is recommended to only use _IO for commands without arguments, and use pointers for passing data.</P>
<DT>type 
<DD style="MARGIN-BOTTOM: 10px; MARGIN-TOP: 3px; MARGIN-LEFT: 30px; LINE-HEIGHT: 1.4em; hyphens: auto">
<P style="MARGIN-TOP: 0px; LINE-HEIGHT: 1.4em; hyphens: auto">An 8-bit number, often a character literal, specific to a subsystem or driver, and listed in<SPAN>&nbsp;</SPAN><A class="reference internal" style="TEXT-DECORATION: none; BORDER-BOTTOM: rgb(0,75,107) 1px dotted; COLOR: rgb(0,75,107)" href="https://docs.kernel.org/userspace-api/ioctl/ioctl-number.html"><SPAN class=doc><FONT style="BACKGROUND-COLOR: #ffffff" size=4>Ioctl Numbers</FONT></SPAN></A></P>
<DT>nr 
<DD style="MARGIN-BOTTOM: 10px; MARGIN-TOP: 3px; MARGIN-LEFT: 30px; LINE-HEIGHT: 1.4em; hyphens: auto">
<P style="MARGIN-TOP: 0px; LINE-HEIGHT: 1.4em; hyphens: auto">An 8-bit number identifying the specific command, unique for a give value of &#8216;type&#8217;</P>
<DT>data_type 
<DD style="MARGIN-BOTTOM: 0px; MARGIN-TOP: 3px; MARGIN-LEFT: 30px; LINE-HEIGHT: 1.4em; hyphens: auto">
<P style="MARGIN-BOTTOM: 0px; MARGIN-TOP: 0px; LINE-HEIGHT: 1.4em; hyphens: auto">The name of the data type pointed to by the argument, the command number encodes the<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: Consolas, Menlo, "DejaVu Sans Mono", "Bitstream Vera Sans Mono", monospace; COLOR: rgb(34,34,34); BACKGROUND-COLOR: rgb(236,240,243)'><SPAN class=pre style="WHITE-SPACE: nowrap; hyphens: none">sizeof(data_type)</SPAN></CODE><SPAN>&nbsp;</SPAN>value in a 13-bit or 14-bit integer, leading to a limit of 8191 bytes for the maximum size of the argument. Note: do not pass sizeof(data_type) type into _IOR/_IOW/IOWR, as that will lead to encoding sizeof(sizeof(data_type)), i.e. sizeof(size_t). _IO does not have a data_type parameter.</P></DD></DL></SECTION><SECTION id=interface-versions>