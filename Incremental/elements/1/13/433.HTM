<b> : </b><b>Enhance Existing Features</SPAN></H2>
<P style="MARGIN: 0.4em 0px 0.5em">Implementing built-in sharing with minimal code changes requires improving several existing Postgres features:</P>
<UL style="LIST-STYLE-TYPE: square; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; LIST-STYLE-IMAGE: url(/skins/PostgreSQL/resources/images/bullet.svg?36e03); MARGIN: 0.3em 0px 0px 1.6em; PADDING-RIGHT: 0px">
<LI style="MARGIN-BOTTOM: 0.1em"><B>Done?</B><SPAN>&nbsp;</SPAN>Improve the<SPAN>&nbsp;</SPAN><A class="external text" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(51,102,187); PADDING-RIGHT: 13px" href="https://www.postgresql.org/docs/current/static/ddl-foreign-data.html" rel=nofollow>FDW</A><SPAN>&nbsp;</SPAN>infrastructure and<SPAN>&nbsp;</SPAN><A class="external text" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(51,102,187); PADDING-RIGHT: 13px" href="https://www.postgresql.org/docs/current/static/postgres-fdw.html" rel=nofollow>postgres_fdw.</A><SPAN>&nbsp;</SPAN>Specifically, good performance requires that all reasonable operations be pushed to the foreign shards. In Postgres 9.6, joins, sorts, updates, and deletes are pushed to foreign servers. Aggregate pushdown will be supported in Postgres 10. Foreign tables can already participate in inheritance.</LI></UL>
<UL style="LIST-STYLE-TYPE: square; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; LIST-STYLE-IMAGE: url(/skins/PostgreSQL/resources/images/bullet.svg?36e03); MARGIN: 0.3em 0px 0px 1.6em; PADDING-RIGHT: 0px">
<LI style="MARGIN-BOTTOM: 0.1em"><B>Done?</B><SPAN>&nbsp;</SPAN>Postgres 10 will include an overhaul of partitioning for single-node use to improve performance and enable more optimizations, e.g. executor-based partition pruning. This will be used for sharding too.</LI></UL>
<UL style="LIST-STYLE-TYPE: square; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; LIST-STYLE-IMAGE: url(/skins/PostgreSQL/resources/images/bullet.svg?36e03); MARGIN: 0.3em 0px 0px 1.6em; PADDING-RIGHT: 0px">
<LI style="MARGIN-BOTTOM: 0.1em">Add parallelism so FDW requests can be issued in parallel. This would allow parallel shard execution. This perhaps could be done by making multiple asynchronous libpq connections.</LI></UL>
<P style="MARGIN: 0.4em 0px 0.5em">Improving these features has value independent of sharding.