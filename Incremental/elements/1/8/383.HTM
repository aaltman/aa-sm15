<H1 id=postgresql-file-system-tuning style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 2px; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.3; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>PostgreSQL File System Tuning</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#postgresql-file-system-tuning"><FONT class=extract>&#182;</FONT></A></H1>
<H2 id=overview style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 2px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; MARGIN-LEFT: 2px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.4; MARGIN-RIGHT: 2px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Overview</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#overview"><FONT class=extract>&#182;</FONT></A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>This article covers some basic recommended setting for files system tuning in Linux to get some additional performance when running a Postgresql Database.</FONT></P>
<H2 id=file-system-ext4 style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 2px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; MARGIN-LEFT: 2px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.4; MARGIN-RIGHT: 2px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>File System (EXT4)</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#file-system-ext4"><FONT class=extract>&#182;</FONT></A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>I most commonly use CentOS (Currently 6.x versoins) as my go to operating system, because of this I'm going to focus on EXT4. Though some other choices are XFS used for some very large databases and some considered less stable JFS,ReiserFS, BTRFS. Its important to note for Postgersql some bugs involving FSYNC handling were not fully corrected until kernel 2.6.31.8/2.6.32.1. Kernel 2.6.32 is the first version that includes an ext4 version that should be considered safe for production Postgresql databases. From the Postgresql perspective the main improvement over EXT3 is EXT4's better handling of write barriers and FSYNC operations.</FONT></P>
<H2 id=read-ahead-tuning style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 2px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; MARGIN-LEFT: 2px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.4; MARGIN-RIGHT: 2px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Read-Ahead Tuning</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#read-ahead-tuning"><FONT class=extract>&#182;</FONT></A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>This feature results in asking for blocks form the disk ahead of the application requesting them. You can check your current read-ahead using the blockdev command, either for a single drive or with a summary for all drives, RAID devices, and logical volumes. The default is 256 for regular drives, and may be larger for software RAID devices. The units here are normally 512 bytes, making the default value equal to 128KB of read-ahead.</FONT></P>
<DIV id=__code_0 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>blockdev --getra /dev/sda
blockdev --report
</FONT></PRE></DIV>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>The normal properly tuned range on modern hardware normally works out to be 4096 to 16384. You can make the change via the blockdev command. Unfortunatley, read-ahead needs to be set for each drive on your system. It's usually handled by putting a blockdev adjustement for each device in rc.local boot script.</FONT></P>
<DIV id=__code_1 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>blockdev --setra <SPAN class=m style="COLOR: rgb(231,76,60)">4096</SPAN> /dev/sda
</FONT></PRE></DIV>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>If you run bonnie++ with a few read-ahead values, you should see the sequential read numbers increase as you tune upwards, eventually leveling off. On smaller disk arrays or single drives, the difference may not be large. Using this amount of read-ahead is necessary to reach full speed on a larger disk array.</FONT></P>
<H2 id=file-access-time-tuning style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 2px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; MARGIN-LEFT: 2px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.4; MARGIN-RIGHT: 2px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>File Access Time Tuning</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#file-access-time-tuning"><FONT class=extract>&#182;</FONT></A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Each time you access a file in Linux, a file attribute called the file's last access time (atime) is updated. You can disable this on the database volume by adding noatime to the volume mount options in /etc/fstab. Note that setting noatime disables both nodiratime and relatime levels of access time udpates.</FONT></P>
<DIV id=__code_2 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>/dev/sda1 /pgsql ext4 noatime,errors<SPAN class=o style="COLOR: ">=</SPAN>remount-ro <SPAN class=m style="COLOR: rgb(231,76,60)">0</SPAN> <SPAN class=m style="COLOR: rgb(231,76,60)">1</SPAN>
</FONT></PRE></DIV>
<H2 id=write-barrier-tuning style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 2px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; MARGIN-LEFT: 2px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.4; MARGIN-RIGHT: 2px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Write Barrier Tuning</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#write-barrier-tuning"><FONT class=extract>&#182;</FONT></A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>When PostgreSQL writes to disk, it executes one of the system fsync calls (fsync or fdatasync) to flush that data to disk. By default, the cache on hard disks and disk controllers are assumed to be volatile: when power fails, data written there will be lost. Since that can result in filesystem and/or database corruption when it happens, fsync in Linux issues a write barrier that forces all data onto physical disk. That will flush the write cache on both RAID and drive write caches.</FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>When the database hardware includes a battery-backed write that's setup correctly, this is not necessary. Writes to that cache are not volatile; they will be saved in the case of a power interruption. In that case, you can turn off barriers on that disk. This results in a significant boost in write performance. You can disable barriers on the database volume by adding nobarrier to the volume mount options in /etc/fstab.</FONT></P>
<DIV id=__code_3 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>/dev/sda1 /pgsql ext4 noatime,nobarrier,errors<SPAN class=o style="COLOR: ">=</SPAN>remount-ro <SPAN class=m style="COLOR: rgb(231,76,60)">0</SPAN> <SPAN class=m style="COLOR: rgb(231,76,60)">1</SPAN>
</FONT></PRE></DIV>
<H2 id=read-caching-and-swapping-tuning style='FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 2px; TEXT-TRANSFORM: none; FONT-WEIGHT: 300; COLOR: ; FONT-STYLE: normal; MARGIN-LEFT: 2px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: -0.01em; LINE-HEIGHT: 1.4; MARGIN-RIGHT: 2px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Read Caching and Swapping Tuning</FONT><A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#read-caching-and-swapping-tuning"><FONT class=extract>&#182;</FONT></A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>You can check the current value on your system by looking at /proc/sys/vm/swappiness and the easiest way to make a permanent change is to add a line to the /etc/sysctl.conf as shown below. A value of 0 perfers shrinking the filesystem cache rather then using then swap, which is recommended behavior for getting predictable database performance.</FONT></P>
<DIV id=__code_4 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>cat /proc/sys/vm/swappiness
</FONT></PRE></DIV>
<DIV id=__code_5 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>vm.swappiness<SPAN class=o style="COLOR: ">=</SPAN><SPAN class=m style="COLOR: rgb(231,76,60)">0</SPAN>
</FONT></PRE></DIV>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Linux's tendency to let processes allocate more RAM than the system has, in hopes not all of it will actually be used. This overcommit behavior should be disabled by making the change below to the sysctl configuration.</FONT></P>
<DIV id=__code_6 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN><FONT class=extract>vm.overcommit_memory<SPAN class=o style="COLOR: ">=</SPAN><SPAN class=m style="COLOR: rgb(231,76,60)">2</SPAN></FONT></PRE></DIV>