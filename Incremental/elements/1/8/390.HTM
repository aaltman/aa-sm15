<b> : </b>Read Caching and Swapping Tuning<A title="Permanent link" class=headerlink style="TEXT-DECORATION: none; COLOR: ; DISPLAY: inline-block; -webkit-tap-highlight-color: transparent; transition: transform 0.25s 0.25s, color 0.25s, opacity 0.125s 0.25s, -webkit-transform 0.25s 0.25s; transform: translateY(0.25rem); opacity: 0" href="https://kb.techtaco.org/linux/postgresql/postgresql_file_system_tuning/#read-caching-and-swapping-tuning">&#182;</A></H2>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>You can check the current value on your system by looking at /proc/sys/vm/swappiness and the easiest way to make a permanent change is to add a line to the /etc/sysctl.conf as shown below. A value of 0 perfers shrinking the filesystem cache rather then using then swap, which is recommended behavior for getting predictable database performance.</P>
<DIV id=__code_4 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN>cat /proc/sys/vm/swappiness
</PRE></DIV>
<DIV id=__code_5 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN>vm.swappiness<SPAN class=o style="COLOR: ">=</SPAN><SPAN class=m style="COLOR: rgb(231,76,60)">0</SPAN>
</PRE></DIV>
<P style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>Linux's tendency to let processes allocate more RAM than the system has, in hopes not all of it will actually be used. This overcommit behavior should be disabled by making the change below to the sysctl configuration.</P>
<DIV id=__code_6 class=codehilite style='FONT-SIZE: 16px; FONT-FAMILY: Roboto, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; POSITION: relative; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(55,71,79); PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; PADDING-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 1em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-radius: 0.1rem'><PRE style='FONT-SIZE: 13px; OVERFLOW: auto; FONT-FAMILY: "Roboto Mono", "Courier New", Courier, monospace; VERTICAL-ALIGN: top; POSITION: relative; COLOR: rgb(55,71,79); DIRECTION: ltr; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; DISPLAY: block; LINE-HEIGHT: 1.4; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent; border-radius: 0.1rem; font-feature-settings: "kern"'><SPAN></SPAN>vm.overcommit_memory<SPAN class=o style="COLOR: ">=</SPAN><SPAN class=m style="COLOR: rgb(231,76,60)">2</SPAN></PRE></DIV>