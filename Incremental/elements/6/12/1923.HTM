<b> : </b>Life of a Request</H2>
<P style="MARGIN: 0px 0px 20px"><A style="TEXT-DECORATION: none; COLOR: rgb(67,136,255)" href="https://sre.google/sre-book/production-environment/#fig_production-environment_life-of-a-request" data-type="xref">Figure 2-4</A><SPAN>&nbsp;</SPAN>shows how a user&#8217;s request is serviced: first, the user points their browser to<SPAN>&nbsp;</SPAN><EM style="FONT-WEIGHT: bold; FONT-STYLE: normal">shakespeare.google.com</EM>. To obtain the corresponding IP address, the user&#8217;s device resolves the address with its DNS server (1). This request ultimately ends up at Google&#8217;s DNS server, which talks to GSLB. As GSLB keeps track of traffic load among frontend servers across regions, it picks which server IP address to send to this user.</P><FIGURE id=fig_production-environment_life-of-a-request class="horizontal vertical jumptarget" style="FONT-WEIGHT: 700; OUTLINE-WIDTH: 0px; TEXT-ALIGN: center; PADDING-TOP: 50px; OUTLINE-STYLE: none; MARGIN: 20px auto; OUTLINE-COLOR: invert"><IMG style="MARGIN-BOTTOM: 20px; MAX-WIDTH: 820px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px; MAX-HEIGHT: 440px" alt="Life of a request." src="https://lh3.googleusercontent.com/oABYup26V8DtDwmugmNQebUmUSOzM9UFY-jXD-C31MIuIA7MODQe8fCOT5pHERILEcptT5ymIa12DLZACCJmlQWzE3AT2KV2cop96jA=s900"><FIGCAPTION><SPAN class=label>Figure 2-4.<SPAN>&nbsp;</SPAN></SPAN>The life of a request</FIGCAPTION></FIGURE>
<P style="MARGIN: 0px 0px 20px">The browser connects to the HTTP server on this IP. This server (named the Google Frontend, or GFE) is a reverse proxy that terminates the TCP connection (2). The GFE looks up which service is required (web search, maps, or&#8212;in this case&#8212;Shakespeare). Again using GSLB, the server finds an available Shakespeare frontend server, and sends that server an RPC containing the HTTP request (3).</P>
<P style="MARGIN: 0px 0px 20px">The Shakespeare server analyzes the HTTP request and constructs a protobuf containing the word to look up. The Shakespeare frontend server now needs to contact the Shakespeare backend server: the frontend server contacts GSLB to obtain the BNS address of a suitable and unloaded backend server (4). That Shakespeare backend server now contacts a Bigtable server to obtain the requested data (5).</P>
<P style="MARGIN: 0px 0px 20px">The answer is written to the reply protobuf and returned to the Shakespeare backend server. The backend hands a protobuf containing the results to the Shakespeare<SPAN>&nbsp;</SPAN><SPAN class=keep-together>frontend</SPAN><SPAN>&nbsp;</SPAN>server, which assembles the HTML and returns the answer to the user.</P>
<P style="MARGIN: 0px 0px 20px">This entire chain of events is executed in the blink of an eye&#8212;just a few hundred milliseconds! Because many moving parts are involved, there are many potential points of failure; in particular, a failing GSLB would wreak havoc. However, Google&#8217;s policies of rigorous testing and careful rollout, in addition to our proactive error recovery methods such as graceful degradation, allow us to deliver the reliable service that our users have come to expect. After all, people regularly use<SPAN>&nbsp;</SPAN><EM style="FONT-WEIGHT: bold; FONT-STYLE: normal">www.google.com</EM><SPAN>&nbsp;</SPAN>to check if their Internet connection is set up correctly.</P></SECTION><SECTION id=xref_production-environment_job-and-data-organization data-type="sect2">