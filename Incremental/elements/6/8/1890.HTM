<b> : </b>Metastable Failures in the Wild</H1></DIV></DIV>
<DIV id=content class=column>
<DIV class=section>
<DIV class="region region-content">
<DIV id=block-system-main class="block block-system main">
<DIV class=content>
<DIV id=node-281493 class="node node-login-online view-mode-full view-mode-full--node view-mode-full--node--login_online clearfix">
<DIV class=content>
<DIV class="group-article-body-wrapper field-group-div" style="BOX-SIZING: border-box; MAX-WIDTH: 1200px; POSITION: relative; PADDING-LEFT: 0px; MARGIN: 0px auto; PADDING-RIGHT: 0px; box-shadow: rgba(0, 0, 0, 0.15) 0px 11px 10px 0px">
<DIV class="field field-name-field-lv2-publication-date field-type-datetime field-label-hidden" style="FONT-SIZE: 14px; PADDING-BOTTOM: 10px; TEXT-ALIGN: center; PADDING-TOP: 10px">
<DIV class=field-items>
<DIV class="field-item odd"><SPAN class=date-display-single>June 20, 2022</SPAN></DIV></DIV></DIV>
<DIV class="field field-name-field-lv2-article-type field-type-taxonomy-term-reference field-label-hidden" style="BOX-SIZING: border-box; FONT-SIZE: 14px; TEXT-TRANSFORM: uppercase; FONT-WEIGHT: 800; MARGIN: 0px 150px; DISPLAY: flex; align-items: center; justify-content: center">
<DIV class=field-items>
<DIV class="field-item odd" style="PADDING-LEFT: 10px; PADDING-RIGHT: 10px; flex-shrink: 0">Research</DIV></DIV></DIV>
<DIV class="field field-label-inline clearfix field-type-text-long field-pseudo-field field-pseudo-field--author-list" style="BOX-SIZING: border-box; FONT-SIZE: 16px; PADDING-BOTTOM: 10px; TEXT-ALIGN: justify; MARGIN: 0px 150px; DISPLAY: flex; justify-content: center; flex-direction: row">
<DIV class=field-label style="FLOAT: left; FONT-WEIGHT: 400">Authors:&nbsp;</DIV>
<DIV class=field-items style="FLOAT: left"><A title="Lexiang Huang" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Lexiang%20Huang">Lexiang Huang</A>,<SPAN>&nbsp;</SPAN><A title="Matthew Magnusson" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Matthew%20Magnusson">Matthew Magnusson</A>,<SPAN>&nbsp;</SPAN><A title="Abishek Bangalore Muralikrishna" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Abishek%20Bangalore%20Muralikrishna">Abishek Bangalore Muralikrishna</A>,<SPAN>&nbsp;</SPAN><A title="Salman Estyak" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Salman%20Estyak">Salman Estyak</A>,<SPAN>&nbsp;</SPAN><A title="Rebecca Isaacs" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Rebecca%20Isaacs">Rebecca Isaacs</A>,<SPAN>&nbsp;</SPAN><A title="Abutalib Aghayev" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Abutalib%20Aghayev">Abutalib Aghayev</A>,<SPAN>&nbsp;</SPAN><A title="Timothy Zhu" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Timothy%20Zhu">Timothy Zhu</A>,<SPAN>&nbsp;</SPAN><A title="Aleksey Charapko" style="TEXT-DECORATION: none; COLOR: rgb(3,57,216); BACKGROUND-COLOR: transparent" href="https://www.usenix.org/publications/loginonline/metastable-failures-wild#Aleksey%20Charapko">Aleksey Charapko</A></DIV></DIV>
<DIV class="field field-name-field-lv2-shepherds field-type-user-reference field-label-inline clearfix" style="BOX-SIZING: border-box; FONT-SIZE: 16px; PADDING-BOTTOM: 10px; TEXT-ALIGN: justify; MARGIN: 0px 150px; DISPLAY: flex; justify-content: center; flex-direction: row">
<DIV class=field-label style="FLOAT: left; FONT-WEIGHT: 400">Article shepherded by:&nbsp;</DIV>
<DIV class=field-items style="FLOAT: left">
<DIV class="field-item odd"><SPAN class=usenix-user-reference-names>Rik Farrow</SPAN></DIV></DIV></DIV>
<DIV class="paragraphs-items paragraphs-items-field-lv2-body paragraphs-items-field-lv2-body-full paragraphs-items-full" style="BOX-SIZING: border-box; BORDER-TOP: rgb(143,143,143) 2px solid; PADDING-BOTTOM: 20px; PADDING-TOP: 20px; MARGIN: 0px 150px">
<DIV class="field field-name-field-lv2-body field-type-paragraphs field-label-hidden">
<DIV class=field-items>
<DIV class="field-item odd" style="FONT-SIZE: 18px; FONT-FAMILY: Muli, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(0,0,0); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">
<DIV class="entity entity-paragraphs-item paragraphs-item-single-column-text view-mode-full view-mode-full--paragraphs_item view-mode-full--paragraphs_item--single_column_text paragraphs-first-text" style="PADDING-BOTTOM: 20px; PADDING-TOP: 20px">
<DIV class=content>
<DIV class="field field-name-field-single-column-text field-type-text-long field-label-hidden">
<DIV class=field-items>
<DIV class="field-item odd">
<P>Building reliable distributed systems has been the holy grail of distributed computing research. Historically, academic researchers studied the reliability of distributed systems under the assumptions of fail-stop and Byzantine failure modes. The proliferation of cloud services led to previously unseen scales and the discovery of new failure modes, such as stragglers, fail-slow hardware failures, and scalability failures. Most recently, Bronson et al. [2] introduced a new class of failures called metastable failures.</P>
<P>Bronson et al. define the<SPAN>&nbsp;</SPAN><EM>metastable failure state</EM><SPAN>&nbsp;</SPAN>as the state of a<STRONG style="FONT-WEIGHT: bolder"><SPAN>&nbsp;</SPAN>permanent overload with an ultra-low goodput</STRONG><SPAN>&nbsp;</SPAN>(throughput of useful work). In their framework, they also define the<SPAN>&nbsp;</SPAN><EM>stable state</EM><SPAN>&nbsp;</SPAN>as the state when a system experiences a low enough load than it can successfully recover from temporary overloads, and the<SPAN>&nbsp;</SPAN><EM>vulnerable state</EM><SPAN>&nbsp;</SPAN>as the state when a system experiences a high load, but it can successfully handle that load in the absence of temporary overloads. A system experiences a metastable failure when it is in a vulnerable state and a<SPAN>&nbsp;</SPAN><EM>trigger</EM><SPAN>&nbsp;</SPAN>causes a temporary overload that sets off a<SPAN>&nbsp;</SPAN><EM>sustaining effect&nbsp;</EM>&nbsp;&#8212; a work amplification due to a common-case optimization &#8212; that tips the system into a metastable failure state. The distinguishing characteristic of a metastable failure is that the sustaining effect keeps the system in the metastable failure state<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">even after the trigger is removed</STRONG>.</P>
<P>This phenomenon of metastable failure is not new. However, instances of such failures look so dissimilar that it is hard to spot the commonality. As a result, distributed systems practitioners have given different names to different instances of metastable failures, such as persistent congestion, overload, cascading failures, retry storms, death spirals, among others. Bronson et al. [2] is the first work that generalizes all of these different-looking failures under the same framework.</P>
<P>A key property of metastable failures is that their root cause is not a specific hardware failure or a software bug. It is an emergent behavior of a system, and it naturally arises from the optimizations for the common case that lead to sustained work amplification. As such, metastable failures are hard to predict, may potentially have catastrophic effects, and incur significant ongoing human engineering costs because automated recovery is difficult (since these failures are not understood well). Incidentally, at the time of writing this article, a metastable failure at Amazon Web Services (AWS) disrupted the operation of airlines, home appliances, smart homes, payment systems, and other critical services for several hours.</P>
<P>As Bronson et al. point out, operators choose to run their systems in the vulnerable state all the time because it is much more efficient than running them in the stable state. As a simple example, an operator of a system with a database that can handle 300 requests per second (RPS) can install a cache with a 90% hit-rate and start serving up to 3,000 RPS. While more efficient, the system is now operating in a vulnerable state because a cache failure can overwhelm the database with more requests that it can handle. The problem is that in a complex, large-scale distributed system, we lack the ability to analyze the consequences of this decision to run in a vulnerable state under different conditions; e.g., what happens if load increases, or if the downstream latency increases, or if messages increase in size and serialization/deserialization starts to cost more CPU? So picking &#8220;how vulnerable&#8221; of a state to operate in, under normal conditions, is a best guess and not always the right choice, which is why we continue to experience metastable failures.</P>
<P>In this article, we perform a large-scale study of actual metastable failures in the wild by sifting through hundreds of publicly available incident reports. We confirm that metastable failures are universally observed and that they are a recurring pattern in many severe outages. In addition, we present an insider view of a metastable failure that occurred at Twitter, a large-scale internet company. Our study of this failure reveals a new type of metastable failure where garbage collection acts as an amplification mechanism and brings under the spotlight the engineering cost of handling metastable failures. For a detailed model to better understand metastability and more case studies to demonstrate the different types of metastable failures, please refer to our full-length paper [1].</P></DIV></DIV></DIV></DIV></DIV></DIV>
<DIV class="field-item even" style="FONT-SIZE: 18px; FONT-FAMILY: Muli, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(0,0,0); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">
<DIV class="entity entity-paragraphs-item paragraphs-item-single-column-text view-mode-full view-mode-full--paragraphs_item view-mode-full--paragraphs_item--single_column_text" style="PADDING-BOTTOM: 20px; PADDING-TOP: 20px">
<DIV class=content>
<DIV class="field field-name-field-single-column-sub field-type-text field-label-hidden" style="FONT-SIZE: 40px; FONT-FAMILY: Klavika, sans-serif; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; PADDING-TOP: 20px; MARGIN: 0px; LINE-HEIGHT: 50px">
<DIV class=field-items>
<DIV class="field-item odd">Metastability in the Wild</DIV></DIV></DIV>
<DIV class="field field-name-field-single-column-text field-type-text-long field-label-hidden">
<DIV class=field-items>
<DIV class="field-item odd">
<P>In this section, we perform a large-scale study of actual metastable failures in the wild by sifting through hundreds of publicly available incident reports. It is an arduous task that requires an in-depth analysis of each incident report to understand if the failure is metastable, and the lack of details in the reports makes it even more challenging.&nbsp;</P>
<P>We identify 21 metastable failures that are severe enough to warrant public incident reports in a range of organizations, including four at AWS, four at Google Cloud, and four at Microsoft Azure. Though this number may appear low compared to other failure types in distributed systems, metastable failures usually have devastating results that last many hours, which makes them an important class of failures to study.&nbsp;