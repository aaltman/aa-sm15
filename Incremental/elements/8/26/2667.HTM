<H3 style='FONT-SIZE: 28px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 40px 0px 20px; LETTER-SPACING: normal; LINE-HEIGHT: 1.36; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><STRONG style="FONT-WEIGHT: bolder"><FONT class=extract>1.2 How a cache is used by an application</FONT></STRONG></H3>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>When a data request goes through a cache, a copy of the data is either already in the cache, which is called a<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">cache hit</STRONG>, or it&#8217;s not and the data has to be fetched from the primary store and copied into the cache, which is called a<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">cache miss</STRONG>. A cache is performing well when there are many more cache hits than cache misses.&nbsp;</FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract><IMG style="BORDER-TOP-STYLE: none; BORDER-LEFT-STYLE: none; HEIGHT: auto; WIDTH: 660px; BORDER-BOTTOM-STYLE: none; BORDER-RIGHT-STYLE: none" alt="Cache miss and cache hit" src="https://d3no4ktch0fdq4.cloudfront.net/public/CACHE/images/blog-articles/content-images/Diagram_1_2x_1_1024x1024/eec4f3e7daf8307cfe1ddcacfa3a1a21.webp" width=660 height=495 loading="lazy"></FONT></P>
<H3 style='FONT-SIZE: 28px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 40px 0px 20px; LETTER-SPACING: normal; LINE-HEIGHT: 1.36; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><STRONG style="FONT-WEIGHT: bolder"><FONT class=extract>1.3 When to use caching</FONT></STRONG></H3>
<UL style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; PADDING-LEFT: 24px; ORPHANS: 2; WIDOWS: 2; MARGIN: 10px 0px 30px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>
<LI style="MARGIN-BOTTOM: 10px; FONT-WEIGHT: 400"><FONT class=extract><SPAN style="FONT-WEIGHT: 400">Caching is most helpful when the data you need is slow to access, possibly because of slow hardware, having to go over the network, or complex computation.</SPAN> </FONT>
<LI style="MARGIN-BOTTOM: 10px; FONT-WEIGHT: 400"><FONT class=extract><SPAN style="FONT-WEIGHT: 400">Caching is helpful in systems where there are many requests to static or slow to change data, because repeated requests to the cache will be up to date.&nbsp;</SPAN> </FONT>
<LI style="MARGIN-BOTTOM: 10px; FONT-WEIGHT: 400"><SPAN style="FONT-WEIGHT: 400"><FONT class=extract>Caching can also reduce load on primary data stores, which has the downstream effect of reducing service costs to reach performant response times.&nbsp;</FONT></SPAN></LI></UL>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract><SPAN style="FONT-WEIGHT: 400">Ultimately the features of a successful caching layer are highly situation-dependent. Creating and optimizing a cache requires tracking<SPAN>&nbsp;</SPAN></SPAN><STRONG style="FONT-WEIGHT: bolder">latency</STRONG><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">throughput</STRONG><SPAN>&nbsp;</SPAN>metrics, and tuning parameters to the particular data access patterns of the system.&nbsp;</FONT></P>
<H3 style='FONT-SIZE: 28px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 40px 0px 20px; LETTER-SPACING: normal; LINE-HEIGHT: 1.36; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><STRONG style="FONT-WEIGHT: bolder"><FONT class=extract>1.4 When not to use caching</FONT></STRONG></H3>
<UL style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; PADDING-LEFT: 24px; ORPHANS: 2; WIDOWS: 2; MARGIN: 10px 0px 30px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>
<LI style="MARGIN-BOTTOM: 10px; FONT-WEIGHT: 400"><FONT class=extract><SPAN style="FONT-WEIGHT: 400">Caching isn&#8217;t helpful when it takes just as long to access the cache as it does to access the primary data.</SPAN> </FONT>
<LI style="MARGIN-BOTTOM: 10px; FONT-WEIGHT: 400"><FONT class=extract><SPAN style="FONT-WEIGHT: 400">Caching doesn&#8217;t work as well when requests have low repetition (higher randomness), because caching performance comes from repeated memory access patterns.&nbsp;</SPAN> </FONT>
<LI style="MARGIN-BOTTOM: 10px; FONT-WEIGHT: 400"><SPAN style="FONT-WEIGHT: 400"><FONT class=extract>Caching isn&#8217;t helpful when the data changes frequently, as the cached version gets out of sync and the primary data store must be accessed every time.&nbsp;</FONT></SPAN></LI></UL>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><SPAN style="FONT-WEIGHT: 400"><FONT class=extract>It&#8217;s important to note that caches should not be used as permanent data storage - they are almost always implemented in volatile memory because it is faster, and should thus be considered transient. In section 2 below, we&#8217;ll talk more about strategies for writing to a caching layer that don&#8217;t cause data loss.</FONT></SPAN></P>
<H3 style='FONT-SIZE: 28px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 40px 0px 20px; LETTER-SPACING: normal; LINE-HEIGHT: 1.36; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><STRONG style="FONT-WEIGHT: bolder"><FONT class=extract>1.5 Cache performance</FONT></STRONG></H3>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Cache performance is affected by the way data is mapped into the cache. Data is located the fastest in a cache if it&#8217;s mapped to a single cache entry, which is called a<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">direct-mapped cache</STRONG>. But if too many pieces of data are mapped to the same location, the resulting<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">contention</STRONG><SPAN>&nbsp;</SPAN>increases the number of cache misses because relevant data is replaced too soon.&nbsp;</FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract><IMG style="BORDER-TOP-STYLE: none; BORDER-LEFT-STYLE: none; HEIGHT: auto; WIDTH: 660px; BORDER-BOTTOM-STYLE: none; BORDER-RIGHT-STYLE: none" alt="Direct mapped cache" src="https://d3no4ktch0fdq4.cloudfront.net/public/CACHE/images/blog-articles/content-images/Diagram_2_2x_1_1024x1024/b73efa1bc324a76948fd6ac980499f31.webp" width=660 height=495 loading="lazy"></FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>The widely accepted solution is to use a<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">set-associative cache</STRONG><SPAN>&nbsp;</SPAN>design. Each piece of data is mapped to a set of cache entries, which are all checked to determine a cache hit or miss. This is slightly slower than only having to check a single entry, but gives flexibility around choosing what data to keep in the cache. Below, we&#8217;ll talk more about cache replacement algorithms and their design tradeoffs.&nbsp;</FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract><IMG style="BORDER-TOP-STYLE: none; BORDER-LEFT-STYLE: none; HEIGHT: auto; WIDTH: 660px; BORDER-BOTTOM-STYLE: none; BORDER-RIGHT-STYLE: none" alt="Set-associative cache" src="https://d3no4ktch0fdq4.cloudfront.net/public/CACHE/images/blog-articles/content-images/Diagram_3_2x_1_1024x1024/539982ead7ef0eb9e029853f86cdc0e9.webp" width=660 height=495 loading="lazy"></FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>One final thing to note is the performance of a cache on startup. Since caching improves repeated data access, there&#8217;s no performance benefit on a<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">cold start</STRONG>. A cache can be<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">warmed up</STRONG><SPAN>&nbsp;</SPAN>to make sure it doesn&#8217;t lag on startup by<SPAN>&nbsp;</SPAN><STRONG style="FONT-WEIGHT: bolder">seeding</STRONG><SPAN>&nbsp;</SPAN>it with the right data before any operations occur. This can be a set of static data that is known beforehand to be relevant, or predicted based on previous usage patterns.&nbsp;</FONT></P>
<P style='FONT-SIZE: 16px; FONT-FAMILY: "Open Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(74,74,74); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 20px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(251,251,251); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>Now that we&#8217;ve covered the basics of caching, let&#8217;s look more closely at different ways of implementing a cache. First, we&#8217;ll look at &#8220;policies&#8221; for writing to a cache.&nbsp;</FONT></P><BR class=Apple-interchange-newline>