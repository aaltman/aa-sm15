<b> : </b><SPAN id=Stepping_into_the_distributed_world class=ez-toc-section style="BOX-SIZING: border-box" ez-toc-data-id="#Stepping_into_the_distributed_world"></SPAN>Stepping into the distributed world<SPAN class=ez-toc-section-end style="BOX-SIZING: border-box"></SPAN></H3><FIGURE class="wp-block-image size-large" style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(33,37,41); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px 0px 1px; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><IMG class=wp-image-164 style="BOX-SIZING: border-box; MAX-WIDTH: 100%; HEIGHT: auto; VERTICAL-ALIGN: bottom" alt="" src="https://serhatgiydiren.com/wp-content/uploads/2022/10/image-2-1024x500.png" width=1024 height=500 sizes="(max-width: 1024px) 100vw, 1024px" srcset="https://serhatgiydiren.com/wp-content/uploads/2022/10/image-2-1024x500.png 1024w, https://serhatgiydiren.com/wp-content/uploads/2022/10/image-2-300x147.png 300w, https://serhatgiydiren.com/wp-content/uploads/2022/10/image-2-768x375.png 768w, https://serhatgiydiren.com/wp-content/uploads/2022/10/image-2.png 1228w" decoding="async"></FIGURE>
<UL class=wp-block-list style='BOX-SIZING: border-box; FONT-SIZE: 16px; FONT-FAMILY: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(33,37,41); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>
<LI style="BOX-SIZING: border-box">Let&#8217;s think how to make it distributed. We can start with a really straightforward idea, when we move the least recently used cache we just implemented to its own host. The benefit of this, we can now make each host to store only chunk of data, called shard. Because data is split across several hosts, we now can store much more data in memory. Service hosts know about all shards, and they forward put and get requests to a particular shard.</LI>
<LI style="BOX-SIZING: border-box">The same idea, but a slightly different realization, is to use service hosts for the cache. We run cache as a separate process on a service host. And data is also split into shards. And similar to the first option, when service needs to make a call to the cache, it picks the shard that stores data and makes a call.</LI>
<LI style="BOX-SIZING: border-box">Let&#8217;s call these options as distributed cache cluster and co-located cache. And take a look at the benefits of each option.</LI>
<LI style="BOX-SIZING: border-box">Dedicated cluster helps to isolate cache resources from the service resources. Both the cache and the service do not share memory and CPU anymore. And can scale on their own. Dedicated cluster can be used by multiple services. And we can utilize the same cluster across several microservices our team owns. And dedicated cluster also gives us flexibility in choosing hardware. We can choose hardware hosts with a lot of memory and high network bandwidth. Public clouds nowadays provide a variety of memory optimized hardware.</LI>
<LI style="BOX-SIZING: border-box">As for co-located cache, the biggest benefit is that we do not need a separate cluster. This helps to save on hardware cost and usually less operationally intensive than a separate cluster. And with co-location, both the service and the cache scale out at the same time. We just add more hosts to the service cluster when needed.</LI></UL>