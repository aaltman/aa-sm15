<b> : </b><A class=anchor style="BOX-SIZING: border-box; FONT-SIZE: 30px; TEXT-DECORATION: none; WIDTH: 2ex; VERTICAL-ALIGN: baseline; POSITION: absolute; FONT-WEIGHT: 400; COLOR: rgb(234,35,40); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; TEXT-ALIGN: center; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px 0px 0px -1.75ex; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px; VISIBILITY: hidden; transition: 0.2s ease-out; -webkit-text-fill-color: transparent; transform: scale(0.9)" href="https://cassandra.apache.org/doc/stable/cassandra/operating/read_repair.html#improved-read-repair-blocking-behavior-in-cassandra-4-0"></A>Improved Read Repair Blocking Behavior in Cassandra 4.0</H2>
<DIV class=sectionbody style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px">
<DIV class=paragraph style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; MARGIN-TOP: 1px; BORDER-BOTTOM: 0px; OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN-LEFT: 1px; BORDER-LEFT: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px; MARGIN-RIGHT: 1px">
<P style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; COLOR: rgb(117,117,117); OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.6em; PADDING-RIGHT: 0px; hyphens: auto">Cassandra 4.0 makes two improvements to read repair blocking behavior (<A style="BOX-SIZING: border-box; FONT-SIZE: 18px; TEXT-DECORATION: none; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: rgb(28,129,160); OUTLINE-WIDTH: medium; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px; transition: 0.2s ease-out" href="https://issues.apache.org/jira/browse/CASSANDRA-10726">CASSANDRA-10726</A>).</P></DIV>
<DIV class="olist arabic" style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; MARGIN-TOP: 1px; BORDER-BOTTOM: 0px; OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN-LEFT: 1px; BORDER-LEFT: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px; MARGIN-RIGHT: 1px">
<OL class=arabic style="LIST-STYLE-TYPE: none; BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 2px; BORDER-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px">
<LI style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; COLOR: rgb(117,117,117); OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.6em; PADDING-RIGHT: 0px">
<P style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; COLOR: rgb(117,117,117); OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.6em; PADDING-RIGHT: 0px; hyphens: auto">Speculative Retry of Full Data Read Requests. Cassandra 4.0 makes use of speculative retry in sending read requests (full, not digest) to replicas if a full data response is not received, whether in the initial full read request or a full data read request during read repair. With speculative retry if it looks like a response may not be received from the initial set of replicas Cassandra sent messages to, to satisfy the consistency level, it speculatively sends additional read request to un-contacted replica/s. Cassandra 4.0 will also speculatively send a repair mutation to a minority of nodes not involved in the read repair data read / write cycle with the combined contents of all un-acknowledged mutations if it looks like one may not respond. Cassandra accepts acks from them in lieu of acks from the initial mutations sent out, so long as it receives the same number of acks as repair mutations transmitted.</P></LI>
<LI style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; MARGIN-TOP: 0px; BORDER-BOTTOM: 0px; COLOR: rgb(117,117,117); OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; MARGIN-LEFT: 0px; BORDER-LEFT: 0px; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.6em; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0px">
<P style="BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; COLOR: rgb(117,117,117); OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px; OUTLINE-COLOR: invert; LINE-HEIGHT: 1.6em; PADDING-RIGHT: 0px; hyphens: auto">Only blocks on Full Data Responses to satisfy the Consistency Level. Cassandra 4.0 only blocks for what is needed for resolving the digest mismatch and wait for enough full data responses to meet the consistency level, no matter whether it&#8217;s speculative retry or read repair chance. As an example, if it looks like Cassandra might not receive full data requests from everyone in time, it sends additional requests to additional replicas not contacted in the initial full data read. If the collection of nodes that end up responding in time end up agreeing on the data, the response from the disagreeing replica that started the read repair is not considered, and won&#8217;t be included in the response to the client, preserving the expectation of monotonic quorum reads.</P></LI></OL></DIV></DIV></DIV>
<DIV class=sect1 style='BOX-SIZING: border-box; FONT-SIZE: 18px; BORDER-TOP: 0px; FONT-FAMILY: "Open Sans", sans-serif; BORDER-RIGHT: 0px; VERTICAL-ALIGN: baseline; BACKGROUND: rgb(255,255,255); WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(117,117,117); OUTLINE-WIDTH: 0px; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0px; OUTLINE-STYLE: none; PADDING-LEFT: 0px; BORDER-LEFT: 0px; ORPHANS: 2; WIDOWS: 2; MARGIN: 0px; LETTER-SPACING: normal; OUTLINE-COLOR: invert; PADDING-RIGHT: 0px; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>