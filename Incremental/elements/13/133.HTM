<b> : </b>Labels</H3>
<P style="LINE-HEIGHT: 1.5">We&#8217;re learning TLA+ to work on complex systems, so let&#8217;s frame the motivation and existence of labels in that context. What are we building up to?</P>
<P style="LINE-HEIGHT: 1.5">Complex systems have lots of<SPAN>&nbsp;</SPAN><EM>concurrency</EM>, and many things are going on at once. Events aren&#8217;t instantaneous, and may take some time to complete. But they can happen on different timescales. Compare these two steps:</P>
<OL class="arabic simple" style="LIST-STYLE-TYPE: decimal">
<LI style="LINE-HEIGHT: 1.5">
<P style="MARGIN: 0px; LINE-HEIGHT: 1.5">Summing a list of 100 numbers.</P></LI>
<LI style="LINE-HEIGHT: 1.5">
<P style="MARGIN: 0px; LINE-HEIGHT: 1.5">Making an HTTP request and receiving the response.</P></LI></OL>
<P style="LINE-HEIGHT: 1.5">The first line of code takes tens of nanoseconds to run, and the second tens of milliseconds. That&#8217;s a time difference of six orders of magnitude. It might be possible for the summation to happen in between the request and response, but it&#8217;s virtually impossible for the HTTP request to happen in between starting and finishing the summation. In our system, the first event would be &#8220;instantaneous&#8221;, while the second would not.</P>
<P style="LINE-HEIGHT: 1.5">Which brings us to labels. Labels represent everything that can happen in a single step of the system. If I write</P>
<DIV class="highlight-tla notranslate" style="OVERFLOW-X: auto">
<DIV class=highlight style="BOX-SIZING: border-box; BACKGROUND: rgb(248,248,248); MARGIN-TOP: 0px; OVERFLOW-X: auto; COLOR: rgb(37,38,48); PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN-LEFT: 0px; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0px; border-radius: 0.2rem"><PRE style='FONT-FAMILY: "Roboto Mono", monospace, Monaco, Consolas, "Andale Mono"; LINE-HEIGHT: 18px'><SPAN></SPAN><SPAN class=nt style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">Label1:</SPAN>
  <SPAN class=n>x</SPAN> <SPAN class=o style="COLOR: rgb(102,102,102)">:=</SPAN> <SPAN class=n>Sum</SPAN><SPAN class=p>(</SPAN><SPAN class=n>seq</SPAN><SPAN class=p>);</SPAN>
</PRE></DIV></DIV>
<P style="LINE-HEIGHT: 1.5">I am saying that the summation happens in a single step, and no time passes between the start and end of the summation. By contrast, if I write</P>
<DIV class="highlight-tla notranslate" style="OVERFLOW-X: auto">
<DIV class=highlight style="BOX-SIZING: border-box; BACKGROUND: rgb(248,248,248); MARGIN-TOP: 0px; OVERFLOW-X: auto; COLOR: rgb(37,38,48); PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN-LEFT: 0px; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0px; border-radius: 0.2rem"><PRE style='FONT-FAMILY: "Roboto Mono", monospace, Monaco, Consolas, "Andale Mono"; LINE-HEIGHT: 18px'><SPAN></SPAN><SPAN class=nt style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">SendRequest:</SPAN>
  <SPAN class=c style="COLOR: rgb(61,123,123); FONT-STYLE: italic">\* blah blah blah</SPAN>
<SPAN class=nt style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">GetResponse:</SPAN>
  <SPAN class=c style="COLOR: rgb(61,123,123); FONT-STYLE: italic">\* blah blah blah</SPAN>
</PRE></DIV></DIV>
<P style="LINE-HEIGHT: 1.5">Then<SPAN>&nbsp;</SPAN><EM>time passes</EM><SPAN>&nbsp;</SPAN>between<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: "Roboto Mono", monospace, Monaco, Consolas, "Andale Mono"; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; PADDING-RIGHT: 4px; border-radius: 0.2rem'><SPAN class=pre>SendRequest</SPAN></CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE class="docutils literal notranslate" style='FONT-SIZE: 0.9em; FONT-FAMILY: "Roboto Mono", monospace, Monaco, Consolas, "Andale Mono"; PADDING-BOTTOM: 2px; PADDING-TOP: 2px; PADDING-LEFT: 4px; PADDING-RIGHT: 4px; border-radius: 0.2rem'><SPAN class=pre>GetResponse</SPAN></CODE>.</P>
<DIV class="admonition note" style="OVERFLOW: hidden; MARGIN-TOP: 1px; MARGIN-LEFT: 1px; BORDER-LEFT: rgb(88,127,159) 5px solid; MARGIN-RIGHT: 1px; box-shadow: 0px 0px 0px 1px var(--dividerColor); border-radius: 0.2rem">
<P class=admonition-title style="BOX-SIZING: border-box; FONT-WEIGHT: bolder; COLOR: rgb(88,127,159); PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; LINE-HEIGHT: 1.5; PADDING-RIGHT: 0px">Note</P>
<P style="BOX-SIZING: border-box; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; LINE-HEIGHT: 1.5; PADDING-RIGHT: 0px">The labels represent the titular &#8220;actions&#8221; in the<SPAN>&nbsp;</SPAN><EM>Temporal Logic of Actions</EM>.</P></DIV>
<P style="LINE-HEIGHT: 1.5">If I wanted to, I could<SPAN>&nbsp;</SPAN><EM>choose</EM><SPAN>&nbsp;</SPAN>to make the summation nonatomic. Here&#8217;s how I&#8217;d do it in PlusCal:</P>
<DIV class="highlight-tla notranslate" style="OVERFLOW-X: auto">
<DIV class=highlight style="BOX-SIZING: border-box; BACKGROUND: rgb(248,248,248); MARGIN-TOP: 0px; OVERFLOW-X: auto; COLOR: rgb(37,38,48); PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN-LEFT: 0px; PADDING-RIGHT: 0px; MARGIN-RIGHT: 0px; border-radius: 0.2rem"><PRE style='FONT-FAMILY: "Roboto Mono", monospace, Monaco, Consolas, "Andale Mono"; LINE-HEIGHT: 18px'><SPAN></SPAN><SPAN class=nt style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">Sum:</SPAN>
  <SPAN class=k style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">while</SPAN> <SPAN class=n>i</SPAN> <SPAN class=o style="COLOR: rgb(102,102,102)">&lt;=</SPAN> <SPAN class=n>Len</SPAN><SPAN class=p>(</SPAN><SPAN class=n>seq</SPAN><SPAN class=p>)</SPAN> <SPAN class=k style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">do</SPAN>
    <SPAN class=n>x</SPAN> <SPAN class=o style="COLOR: rgb(102,102,102)">:=</SPAN> <SPAN class=n>x</SPAN> <SPAN class=o style="COLOR: rgb(102,102,102)">+</SPAN> <SPAN class=n>seq</SPAN><SPAN class=p>[</SPAN><SPAN class=n>i</SPAN><SPAN class=p>];</SPAN>
    <SPAN class=n>i</SPAN> <SPAN class=o style="COLOR: rgb(102,102,102)">:=</SPAN> <SPAN class=n>i</SPAN> <SPAN class=o style="COLOR: rgb(102,102,102)">+</SPAN> <SPAN class=m style="COLOR: rgb(102,102,102)">1</SPAN><SPAN class=p>;</SPAN>
  <SPAN class=k style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">end</SPAN> <SPAN class=k style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">while</SPAN><SPAN class=p>;</SPAN>
</PRE></DIV></DIV>
<P style="LINE-HEIGHT: 1.5">We&#8217;ll talk about the nuances of<SPAN>&nbsp;</SPAN><A class="reference internal" style="TEXT-DECORATION: none; COLOR: " href="https://www.learntla.com/core/pluscal.html#while"><SPAN class="std std-ref"><FONT color=#0066cc size=3>while</FONT></SPAN></A><SPAN>&nbsp;</SPAN>later, but the basic idea is that now<SPAN>&nbsp;</SPAN><EM>each iteration</EM><SPAN>&nbsp;</SPAN>of the summation is nonatomic. We could add two numbers, start an http request, add two more, receive the response, and add the rest. Or we could add them all before both steps of the http, or all after. Concurrency is weird.</P>
<P style="LINE-HEIGHT: 1.5">The point is this: the labels let us specify just how concurrent our system is. If we want to express that something is atomic, we can do that. If we want it to be interruptable, we can do that too. This is what gives us the flexibility to model systems in a way that actually finds relevant issues.</P></SECTION><SECTION id=label-rules style="MARGIN-TOP: 2px; MARGIN-LEFT: 2px; MARGIN-RIGHT: 2px">