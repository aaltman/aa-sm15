<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract><B>Peterson's algorithm</B><SPAN>&nbsp;</SPAN>(or<SPAN>&nbsp;</SPAN><B>Peterson's solution</B>) is a<SPAN>&nbsp;</SPAN></FONT><A title="Concurrent programming" class=mw-redirect style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Concurrent_programming"><FONT class=extract>concurrent programming</FONT></A><SPAN><FONT class=extract>&nbsp;</FONT></SPAN><A title=Algorithm style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Algorithm"><FONT class=extract>algorithm</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>for<SPAN>&nbsp;</SPAN></FONT><A title="Mutual exclusion" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Mutual_exclusion"><FONT class=extract>mutual exclusion</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>that allows two or more processes to share a single-use resource without conflict, using only shared memory for<SPAN>&nbsp;</SPAN></FONT><A title=Communication style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Communication"><FONT class=extract>communication</FONT></A><FONT class=extract>. It was formulated by<SPAN>&nbsp;</SPAN></FONT><A title="Gary L. Peterson (page does not exist)" class=new style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Gary_L._Peterson&amp;action=edit&amp;redlink=1"><FONT class=extract>Gary L. Peterson</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>in 1981.<SUP id=cite_ref-original_1-0 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-original-1"><FONT face=Arial>[1]</FONT></A></SUP><SPAN>&nbsp;</SPAN>While Peterson's original formulation worked with only two processes, the algorithm can be generalized for more than two.<SUP id=cite_ref-2 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-2"><FONT face=Arial>[2]</FONT></A></SUP></FONT></P>
<DIV class="mw-heading mw-heading2" style='FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-FAMILY: "Linux Libertine", Georgia, Times, "Source Serif Pro", serif; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; PADDING-BOTTOM: 0.17em; FONT-STYLE: normal; PADDING-TOP: 0.5em; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.25em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.375; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>
<H2 id=The_algorithm style='OVERFLOW: hidden; BORDER-TOP: 0px; FONT-FAMILY: "Linux Libertine", Georgia, Times, "Source Serif Pro", serif; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px 0px 0.25em; DISPLAY: inline; LINE-HEIGHT: 1.375; PADDING-RIGHT: 0px; font-stretch: inherit; font-optical-sizing: inherit; font-size-adjust: inherit; font-kerning: inherit; font-feature-settings: inherit; font-variation-settings: inherit'>The algorithm</H2><SPAN class=mw-editsection style="FONT-SIZE: small; FONT-FAMILY: sans-serif; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; MARGIN-LEFT: 1em; LINE-HEIGHT: 0; MARGIN-RIGHT: 0px; user-select: none"><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-RIGHT: 0.25em">[</SPAN><A title="Edit section: The algorithm" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: nowrap; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Peterson%27s_algorithm&amp;action=edit&amp;section=1"><SPAN>edit</SPAN></A><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-LEFT: 0.25em">]</SPAN></SPAN></FONT></DIV>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>The algorithm uses two variables:<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag</CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn</CODE>. A<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag[n]</CODE><SPAN>&nbsp;</SPAN>value of<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">true</CODE><SPAN>&nbsp;</SPAN>indicates that the process<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">n</CODE><SPAN>&nbsp;</SPAN>wants to enter the<SPAN>&nbsp;</SPAN></FONT><A title="Critical section" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Critical_section"><FONT class=extract>critical section</FONT></A><FONT class=extract>. Entrance to the critical section is granted for process P0 if P1 does not want to enter its critical section or if P1 has given priority to P0 by setting<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn</CODE><SPAN>&nbsp;</SPAN>to<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">0</CODE>.</FONT></P><FIGURE class=mw-default-size style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; BORDER-TOP-COLOR: ; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-COLLAPSE: collapse; MIN-WIDTH: 100px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FLOAT: right; BORDER-LEFT-COLOR: ; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; TEXT-ALIGN: center; CLEAR: right; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1.3em 1.4em; DISPLAY: table; BORDER-RIGHT-COLOR: ; LETTER-SPACING: normal; LINE-HEIGHT: 0; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: " typeof="mw:File/Thumb"><A class=mw-file-description style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; POSITION: relative; COLOR: ; BORDER-LEFT: 0px; DISPLAY: block; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/File:Peterson%27s_Algorithm.svg"><FONT class=extract><IMG class=mw-file-element style="BORDER-TOP: 1px solid; HEIGHT: auto; BORDER-RIGHT: 1px solid; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; MARGIN: 3px" src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Peterson%27s_Algorithm.svg/220px-Peterson%27s_Algorithm.svg.png" width=220 height=161 decoding="async" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Peterson%27s_Algorithm.svg/330px-Peterson%27s_Algorithm.svg.png 1.5x, //upload.wikimedia.org/wikipedia/commons/thumb/a/a8/Peterson%27s_Algorithm.svg/440px-Peterson%27s_Algorithm.svg.png 2x" data-file-width="1160" data-file-height="850"></FONT></A><FIGCAPTION style="FONT-SIZE: 14px; BORDER-TOP: 0px; BORDER-LEFT-COLOR: ; PADDING-BOTTOM: 6px; BORDER-BOTTOM-COLOR: ; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 6px; DISPLAY: table-caption; BORDER-RIGHT-COLOR: ; LINE-HEIGHT: 1.4em; PADDING-RIGHT: 6px; CAPTION-SIDE: bottom; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: "><FONT class=extract>Peterson's algorithm</FIGCAPTION></FIGURE> </FONT>
<TABLE style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">
<TBODY>
<TR>
<TD colSpan=2>
<DIV class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" style="BACKGROUND: rgb(248,248,248); unicode-bidi: embed; COLOR: rgb(51,51,51)" dir=ltr><PRE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; OVERFLOW-X: hidden; BORDER-BOTTOM: 1px solid; POSITION: relative; COLOR: rgb(51,51,51); PADDING-BOTTOM: 1em; PADDING-TOP: 1em; PADDING-LEFT: 1em; BORDER-LEFT: 1px solid; LINE-HEIGHT: 1.3; PADDING-RIGHT: 1em; BACKGROUND-COLOR: rgb(248,248,248); overflow-wrap: break-word; tab-size: 4"><SPAN></SPAN><FONT class=extract><SPAN class=kt style="COLOR: rgb(176,0,64)">bool</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">2</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=p>{</SPAN><SPAN class=nb style="COLOR: rgb(0,128,0)">false</SPAN><SPAN class=p>,</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=nb style="COLOR: rgb(0,128,0)">false</SPAN><SPAN class=p>};</SPAN>
<SPAN class=kt style="COLOR: rgb(176,0,64)">int</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=n>turn</SPAN><SPAN class=p>;</SPAN>
</FONT></PRE></DIV></TD></TR>
<TR>
<TD>
<DIV class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" style="BACKGROUND: rgb(248,248,248); unicode-bidi: embed; COLOR: rgb(51,51,51)" dir=ltr><PRE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; OVERFLOW-X: hidden; BORDER-BOTTOM: 1px solid; POSITION: relative; COLOR: rgb(51,51,51); PADDING-BOTTOM: 1em; PADDING-TOP: 1em; PADDING-LEFT: 1em; BORDER-LEFT: 1px solid; LINE-HEIGHT: 1.3; PADDING-RIGHT: 1em; BACKGROUND-COLOR: rgb(248,248,248); overflow-wrap: break-word; tab-size: 4"><SPAN></SPAN><FONT class=extract><SPAN class=nl style="COLOR: rgb(118,118,0)">P0</SPAN><SPAN class=p>:</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)">      </SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">0</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=nb style="COLOR: rgb(0,128,0)">true</SPAN><SPAN class=p>;</SPAN>
<SPAN class=nl style="COLOR: rgb(118,118,0)">P0_gate</SPAN><SPAN class=p>:</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=n>turn</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">1</SPAN><SPAN class=p>;</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=k style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">while</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=p>(</SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">1</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">&amp;&amp;</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=n>turn</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">==</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">1</SPAN><SPAN class=p>)</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=p>{</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">             </SPAN><SPAN class=c1 style="COLOR: rgb(61,123,123); FONT-STYLE: italic">// busy wait</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=p>}</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=c1 style="COLOR: rgb(61,123,123); FONT-STYLE: italic">// critical section</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=p>...</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=c1 style="COLOR: rgb(61,123,123); FONT-STYLE: italic">// end of critical section</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">0</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=nb style="COLOR: rgb(0,128,0)">false</SPAN><SPAN class=p>;</SPAN>
</FONT></PRE></DIV></TD>
<TD>
<DIV class="mw-highlight mw-highlight-lang-cpp mw-content-ltr" style="BACKGROUND: rgb(248,248,248); unicode-bidi: embed; COLOR: rgb(51,51,51)" dir=ltr><PRE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; OVERFLOW-X: hidden; BORDER-BOTTOM: 1px solid; POSITION: relative; COLOR: rgb(51,51,51); PADDING-BOTTOM: 1em; PADDING-TOP: 1em; PADDING-LEFT: 1em; BORDER-LEFT: 1px solid; LINE-HEIGHT: 1.3; PADDING-RIGHT: 1em; BACKGROUND-COLOR: rgb(248,248,248); overflow-wrap: break-word; tab-size: 4"><SPAN></SPAN><FONT class=extract><SPAN class=nl style="COLOR: rgb(118,118,0)">P1</SPAN><SPAN class=p>:</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)">      </SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">1</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=nb style="COLOR: rgb(0,128,0)">true</SPAN><SPAN class=p>;</SPAN>
<SPAN class=nl style="COLOR: rgb(118,118,0)">P1_gate</SPAN><SPAN class=p>:</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=n>turn</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">0</SPAN><SPAN class=p>;</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=k style="FONT-WEIGHT: bold; COLOR: rgb(0,128,0)">while</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=p>(</SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">0</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">&amp;&amp;</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=n>turn</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">==</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">0</SPAN><SPAN class=p>)</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=p>{</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">             </SPAN><SPAN class=c1 style="COLOR: rgb(61,123,123); FONT-STYLE: italic">// busy wait</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=p>}</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=c1 style="COLOR: rgb(61,123,123); FONT-STYLE: italic">// critical section</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=p>...</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=c1 style="COLOR: rgb(61,123,123); FONT-STYLE: italic">// end of critical section</SPAN>
<SPAN class=w style="COLOR: rgb(187,187,187)">         </SPAN><SPAN class=n>flag</SPAN><SPAN class=p>[</SPAN><SPAN class=mi style="COLOR: rgb(102,102,102)">1</SPAN><SPAN class=p>]</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=o style="COLOR: rgb(102,102,102)">=</SPAN><SPAN class=w style="COLOR: rgb(187,187,187)"> </SPAN><SPAN class=nb style="COLOR: rgb(0,128,0)">false</SPAN><SPAN class=p>;</SPAN>
</FONT></PRE></DIV></TD></TR></TBODY></TABLE>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>The algorithm satisfies the three essential criteria to solve the critical-section problem. The while condition works even with preemption.<SUP id=cite_ref-original_1-1 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-original-1"><FONT face=Arial>[1]</FONT></A></SUP></FONT></P>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>The three criteria are mutual exclusion, progress, and bounded waiting.<SUP id=cite_ref-Silberschatz.p194_3-0 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-Silberschatz.p194-3"><FONT face=Arial>[3]</FONT></A></SUP></FONT></P>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>Since<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn</CODE><SPAN>&nbsp;</SPAN>can take on one of two values, it can be replaced by a single bit, meaning that the algorithm requires only three bits of memory.<SUP id=cite_ref-raynal_4-0 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-raynal-4"><FONT face=Arial>[4]</FONT></A></SUP><SUP class="reference nowrap" style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><SPAN title="Page / location: 22"><FONT color=#202122 face=Arial>:&#8202;22&#8202;</FONT></SPAN></SUP></FONT></P>
<DIV class="mw-heading mw-heading3" style="FONT-SIZE: 1.2em; OVERFLOW: hidden; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0.5em; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.25em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.6; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>
<H3 id=Mutual_exclusion style="OVERFLOW: hidden; BORDER-TOP: 0px; FONT-FAMILY: inherit; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px 0px 0.25em; DISPLAY: inline; LINE-HEIGHT: 1.6; PADDING-RIGHT: 0px; font-stretch: inherit; font-optical-sizing: inherit; font-size-adjust: inherit; font-kerning: inherit; font-feature-settings: inherit; font-variation-settings: inherit">Mutual exclusion</H3><SPAN class=mw-editsection style="FONT-SIZE: small; FONT-FAMILY: sans-serif; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; MARGIN-LEFT: 1em; LINE-HEIGHT: 0; MARGIN-RIGHT: 0px; user-select: none"><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-RIGHT: 0.25em">[</SPAN><A title="Edit section: Mutual exclusion" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: nowrap; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Peterson%27s_algorithm&amp;action=edit&amp;section=2"><SPAN>edit</SPAN></A><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-LEFT: 0.25em">]</SPAN></SPAN></FONT></DIV>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>P0 and P1 can never be in the critical section at the same time. If P0 is in its critical section, then<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag[0]</CODE><SPAN>&nbsp;</SPAN>is true. In addition, either<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag[1]</CODE><SPAN>&nbsp;</SPAN>is<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">false</CODE><SPAN>&nbsp;</SPAN>(meaning that P1 has left its critical section), or<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn</CODE><SPAN>&nbsp;</SPAN>is<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">0</CODE><SPAN>&nbsp;</SPAN>(meaning that P1 is just now trying to enter the critical section, but graciously waiting), or P1 is at label<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">P1_gate</CODE><SPAN>&nbsp;</SPAN>(trying to enter its critical section, after setting<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag[1]</CODE><SPAN>&nbsp;</SPAN>to<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">true</CODE><SPAN>&nbsp;</SPAN>but before setting<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn</CODE><SPAN>&nbsp;</SPAN>to<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">0</CODE><SPAN>&nbsp;</SPAN>and busy waiting). So if both processes are in their critical sections, then we conclude that the state must satisfy<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag[0]</CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">flag[1]</CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn = 0</CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn = 1</CODE>. No state can satisfy both<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn = 0</CODE><SPAN>&nbsp;</SPAN>and<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">turn = 1</CODE>, so there can be no state where both processes are in their critical sections. (This recounts an argument that is made rigorous in Schneider 1997.<SUP id=cite_ref-Schneider.p185_5-0 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-Schneider.p185-5"><FONT face=Arial>[5]</FONT></A></SUP>)</FONT></P>
<DIV class="mw-heading mw-heading3" style="FONT-SIZE: 1.2em; OVERFLOW: hidden; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0.5em; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.25em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.6; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>
<H3 id=Progress style="OVERFLOW: hidden; BORDER-TOP: 0px; FONT-FAMILY: inherit; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px 0px 0.25em; DISPLAY: inline; LINE-HEIGHT: 1.6; PADDING-RIGHT: 0px; font-stretch: inherit; font-optical-sizing: inherit; font-size-adjust: inherit; font-kerning: inherit; font-feature-settings: inherit; font-variation-settings: inherit">Progress</H3><SPAN class=mw-editsection style="FONT-SIZE: small; FONT-FAMILY: sans-serif; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; MARGIN-LEFT: 1em; LINE-HEIGHT: 0; MARGIN-RIGHT: 0px; user-select: none"><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-RIGHT: 0.25em">[</SPAN><A title="Edit section: Progress" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: nowrap; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Peterson%27s_algorithm&amp;action=edit&amp;section=3"><SPAN>edit</SPAN></A><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-LEFT: 0.25em">]</SPAN></SPAN></FONT></DIV>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>Progress is defined as the following: if no process is executing in its critical section and some processes wish to enter their critical sections, then only those processes that are not executing in their remainder sections can participate in making the decision as to which process will enter its critical section next. Note that for a process or thread, the remainder sections are parts of the code that are not related to the critical section. This selection cannot be postponed indefinitely.<SUP id=cite_ref-Silberschatz.p194_3-1 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-Silberschatz.p194-3"><FONT face=Arial>[3]</FONT></A></SUP><SPAN>&nbsp;</SPAN>A process cannot immediately re-enter the critical section if the other process has set its flag to say that it would like to enter its critical section.</FONT></P>
<DIV class="mw-heading mw-heading3" style="FONT-SIZE: 1.2em; OVERFLOW: hidden; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0.5em; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.25em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.6; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>
<H3 id=Bounded_waiting style="OVERFLOW: hidden; BORDER-TOP: 0px; FONT-FAMILY: inherit; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px 0px 0.25em; DISPLAY: inline; LINE-HEIGHT: 1.6; PADDING-RIGHT: 0px; font-stretch: inherit; font-optical-sizing: inherit; font-size-adjust: inherit; font-kerning: inherit; font-feature-settings: inherit; font-variation-settings: inherit">Bounded waiting</H3><SPAN class=mw-editsection style="FONT-SIZE: small; FONT-FAMILY: sans-serif; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; MARGIN-LEFT: 1em; LINE-HEIGHT: 0; MARGIN-RIGHT: 0px; user-select: none"><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-RIGHT: 0.25em">[</SPAN><A title="Edit section: Bounded waiting" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: nowrap; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Peterson%27s_algorithm&amp;action=edit&amp;section=4"><SPAN>edit</SPAN></A><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-LEFT: 0.25em">]</SPAN></SPAN></FONT></DIV>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>Bounded waiting, or<SPAN>&nbsp;</SPAN></FONT><A title="Bounded bypass" class=mw-redirect style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Bounded_bypass"><FONT class=extract>bounded bypass</FONT></A><FONT class=extract>, means that the number of times a process is bypassed by another process after it has indicated its desire to enter the critical section is bounded by a function of the number of processes in the system.<SUP id=cite_ref-Silberschatz.p194_3-2 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-Silberschatz.p194-3"><FONT face=Arial>[3]</FONT></A></SUP><SUP id=cite_ref-raynal_4-1 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-raynal-4"><FONT face=Arial>[4]</FONT></A></SUP><SUP class="reference nowrap" style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><SPAN title="Page / location: 11"><FONT color=#202122 face=Arial>:&#8202;11&#8202;</FONT></SPAN></SUP><SPAN>&nbsp;</SPAN>In Peterson's algorithm, a process will never wait longer than one turn for entrance to the critical section.</FONT></P>
<DIV class="mw-heading mw-heading3" style="FONT-SIZE: 1.2em; OVERFLOW: hidden; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; FONT-STYLE: normal; PADDING-TOP: 0.5em; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.25em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.6; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">
<H3 id="Filter_algorithm:_Peterson's_algorithm_for_more_than_two_processes" style="OVERFLOW: hidden; BORDER-TOP: 0px; FONT-FAMILY: inherit; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; FONT-WEIGHT: bold; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px 0px 0.25em; DISPLAY: inline; LINE-HEIGHT: 1.6; PADDING-RIGHT: 0px; font-stretch: inherit; font-optical-sizing: inherit; font-size-adjust: inherit; font-kerning: inherit; font-feature-settings: inherit; font-variation-settings: inherit"><SPAN id=Filter_algorithm:_Peterson.27s_algorithm_for_more_than_two_processes></SPAN><SPAN id=Filter_algorithm class=anchor></SPAN><FONT class=extract>Filter algorithm: Peterson's algorithm for more than two processes</FONT></H3><SPAN class=mw-editsection style="FONT-SIZE: small; FONT-FAMILY: sans-serif; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; MARGIN-LEFT: 1em; LINE-HEIGHT: 0; MARGIN-RIGHT: 0px; user-select: none"><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-RIGHT: 0.25em"><FONT class=extract>[</FONT></SPAN><A title="Edit section: Filter algorithm: Peterson's algorithm for more than two processes" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: nowrap; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Peterson%27s_algorithm&amp;action=edit&amp;section=5"><SPAN><FONT class=extract>edit</FONT></SPAN></A><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-LEFT: 0.25em"><FONT class=extract>]</FONT></SPAN></SPAN></DIV><FIGURE class=mw-default-size style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; BORDER-TOP-COLOR: ; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-COLLAPSE: collapse; MIN-WIDTH: 100px; BORDER-BOTTOM: 0px; TEXT-TRANSFORM: none; FLOAT: right; BORDER-LEFT-COLOR: ; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; TEXT-ALIGN: center; CLEAR: right; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1.3em 1.4em; DISPLAY: table; BORDER-RIGHT-COLOR: ; LETTER-SPACING: normal; LINE-HEIGHT: 0; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: " typeof="mw:File/Thumb"><A class=mw-file-description style="TEXT-DECORATION: none; BORDER-TOP: 0px; BORDER-RIGHT: 0px; BACKGROUND: none transparent scroll repeat 0% 0%; BORDER-BOTTOM: 0px; POSITION: relative; COLOR: ; BORDER-LEFT: 0px; DISPLAY: block; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/File:Snapshot_of_filter_algorithm_(Peterson%27s_algorithm_for_more_than_2_processes)_in_progress.png"><FONT class=extract><IMG class=mw-file-element style="BORDER-TOP: 1px solid; HEIGHT: auto; BORDER-RIGHT: 1px solid; VERTICAL-ALIGN: middle; BORDER-BOTTOM: 1px solid; BORDER-LEFT: 1px solid; MARGIN: 3px" src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Snapshot_of_filter_algorithm_%28Peterson%27s_algorithm_for_more_than_2_processes%29_in_progress.png/220px-Snapshot_of_filter_algorithm_%28Peterson%27s_algorithm_for_more_than_2_processes%29_in_progress.png" width=220 height=381 decoding="async" srcset="//upload.wikimedia.org/wikipedia/commons/thumb/7/74/Snapshot_of_filter_algorithm_%28Peterson%27s_algorithm_for_more_than_2_processes%29_in_progress.png/330px-Snapshot_of_filter_algorithm_%28Peterson%27s_algorithm_for_more_than_2_processes%29_in_progress.png 1.5x, //upload.wikimedia.org/wikipedia/commons/7/74/Snapshot_of_filter_algorithm_%28Peterson%27s_algorithm_for_more_than_2_processes%29_in_progress.png 2x" data-file-width="419" data-file-height="725"></FONT></A><FIGCAPTION style="FONT-SIZE: 14px; BORDER-TOP: 0px; BORDER-LEFT-COLOR: ; PADDING-BOTTOM: 6px; BORDER-BOTTOM-COLOR: ; TEXT-ALIGN: left; PADDING-TOP: 0px; PADDING-LEFT: 6px; DISPLAY: table-caption; BORDER-RIGHT-COLOR: ; LINE-HEIGHT: 1.4em; PADDING-RIGHT: 6px; CAPTION-SIDE: bottom; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: "><FONT class=extract>Snapshot of filter algorithm with 10 processes in progress. Last to enter are shown bold and underlined. (NB: Depending on scheduling, the last to enter may not be "correct".) At any time, updates to the table could be: the insertion of a new process at level 0, a change to the last to enter at a given level, or a process moving up one level (if it is not the last to enter OR there are no other processes at its own level or higher).</FIGCAPTION></FIGURE> </FONT>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>The filter algorithm generalizes Peterson's algorithm to<SPAN>&nbsp;</SPAN><SPAN class=texhtml style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'><I>N</I><SPAN>&nbsp;</SPAN>&gt; 2</SPAN><SPAN>&nbsp;</SPAN>processes.<SUP id=cite_ref-art_6-0 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-art-6"><FONT face=Arial>[6]</FONT></A></SUP><SPAN>&nbsp;</SPAN>Instead of a boolean flag, it requires an integer variable per process, stored in a single-writer/multiple-reader (SWMR) atomic<SPAN>&nbsp;</SPAN></FONT><A title="Register machine" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Register_machine"><FONT class=extract>register</FONT></A><FONT class=extract>, and<SPAN>&nbsp;</SPAN><SPAN class=texhtml style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'><I>N</I>&nbsp;&#8722;&nbsp;1</SPAN><SPAN>&nbsp;</SPAN>additional variables in similar registers. The registers can be represented in<SPAN>&nbsp;</SPAN></FONT><A title=Pseudocode style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Pseudocode"><FONT class=extract>pseudocode</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>as<SPAN>&nbsp;</SPAN></FONT><A title="Array data type" class=mw-redirect style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Array_data_type"><FONT class=extract>arrays</FONT></A><FONT class=extract>:</FONT></P><PRE style="FONT-SIZE: 16px; BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; OVERFLOW-X: hidden; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; PADDING-BOTTOM: 1em; FONT-STYLE: normal; PADDING-TOP: 1em; PADDING-LEFT: 1em; BORDER-LEFT: 1px solid; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 1.3; PADDING-RIGHT: 1em; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; overflow-wrap: break-word"><FONT class=extract>level&nbsp;: array of N integers
last_to_enter&nbsp;: array of N &#8722; 1 integers
</FONT></PRE>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>The<SPAN>&nbsp;</SPAN><SPAN class=monospaced style="FONT-FAMILY: monospace, monospace">level</SPAN><SPAN>&nbsp;</SPAN>variables take on values up to<SPAN>&nbsp;</SPAN><SPAN class=texhtml style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'><I>N</I>&nbsp;&#8722;&nbsp;1</SPAN>, each representing a distinct "waiting room" before the critical section.<SUP id=cite_ref-art_6-1 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-art-6"><FONT face=Arial>[6]</FONT></A></SUP><SPAN>&nbsp;</SPAN>Processes advance from one room to the next, finishing in room<SPAN>&nbsp;</SPAN><SPAN class=texhtml style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'><I>N</I>&nbsp;&#8722;&nbsp;1</SPAN>, which is the critical section. Specifically, to acquire a lock, process<SPAN>&nbsp;</SPAN><SPAN class="texhtml mvar" style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; FONT-STYLE: italic; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'>i</SPAN><SPAN>&nbsp;</SPAN>executes<SUP id=cite_ref-raynal_4-2 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-raynal-4"><FONT face=Arial>[4]</FONT></A></SUP><SUP class="reference nowrap" style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><SPAN title="Page / location: 22"><FONT color=#202122 face=Arial>:&#8202;22&#8202;</FONT></SPAN></SUP></FONT></P><PRE style="FONT-SIZE: 16px; BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; WHITE-SPACE: pre-wrap; WORD-SPACING: 0px; OVERFLOW-X: hidden; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; PADDING-BOTTOM: 1em; FONT-STYLE: normal; PADDING-TOP: 1em; PADDING-LEFT: 1em; BORDER-LEFT: 1px solid; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; LINE-HEIGHT: 1.3; PADDING-RIGHT: 1em; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; overflow-wrap: break-word"><FONT class=extract>i &#8592; ProcessNo
<B>for</B> &#8467; <B>from</B> 0 <B>to</B> N &#8722; 1 <B>exclusive</B>
    level[i] &#8592; &#8467;
    last_to_enter[&#8467;] &#8592; i
    <B>while</B> last_to_enter[&#8467;] = i <B>and</B> there exists k &#8800; i, such that level[k] &#8805; &#8467;
        <B>wait</B>
</FONT></PRE>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>To release the lock upon exiting the critical section, process<SPAN>&nbsp;</SPAN><SPAN class="texhtml mvar" style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; FONT-STYLE: italic; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'>i</SPAN><SPAN>&nbsp;</SPAN>sets<SPAN>&nbsp;</SPAN><SPAN class=monospaced style="FONT-FAMILY: monospace, monospace">level[i]</SPAN><SPAN>&nbsp;</SPAN>to &#8722;1.</FONT></P>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>That this algorithm achieves mutual exclusion can be proven as follows. Process<SPAN>&nbsp;</SPAN><SPAN class="texhtml mvar" style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; FONT-STYLE: italic; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'>i</SPAN><SPAN>&nbsp;</SPAN>exits the inner loop when there is either no process with a higher level than<SPAN>&nbsp;</SPAN><SPAN class=monospaced style="FONT-FAMILY: monospace, monospace">level[i]</SPAN>, so the next waiting room is free; or, when<SPAN>&nbsp;</SPAN><SPAN class=monospaced style="FONT-FAMILY: monospace, monospace">i &#8800; last_to_enter[&#8467;]</SPAN>, so another process joined its waiting room. At level zero, then, even if all<SPAN>&nbsp;</SPAN><SPAN class="texhtml mvar" style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; FONT-STYLE: italic; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'>N</SPAN><SPAN>&nbsp;</SPAN>processes were to enter waiting room zero at the same time, no more than<SPAN>&nbsp;</SPAN><SPAN class=texhtml style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'><I>N</I>&nbsp;&#8722;&nbsp;1</SPAN><SPAN>&nbsp;</SPAN>will proceed to the next room, the final one finding itself the last to enter the room. Similarly, at the next level,<SPAN>&nbsp;</SPAN><SPAN class=texhtml style='FONT-SIZE: 18px; FONT-FAMILY: "Nimbus Roman No9 L", "Times New Roman", Times, serif; WHITE-SPACE: nowrap; LINE-HEIGHT: 1; font-kerning: none; font-variant-numeric: lining-nums tabular-nums'><I>N</I>&nbsp;&#8722;&nbsp;2</SPAN><SPAN>&nbsp;</SPAN>will proceed,<SPAN>&nbsp;</SPAN></FONT><A title="Mathematical induction" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Mathematical_induction"><FONT class=extract>etc.</FONT></A><FONT class=extract>, until at the final level, only one process is allowed to leave the waiting room and enter the critical section, giving mutual exclusion.<SUP id=cite_ref-raynal_4-3 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-raynal-4"><FONT face=Arial>[4]</FONT></A></SUP><SUP class="reference nowrap" style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><SPAN title="Page / location: 22&#8211;24"><FONT color=#202122 face=Arial>:&#8202;22&#8211;24&#8202;</FONT></SPAN></SUP></FONT></P>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>Unlike the two-process Peterson algorithm, the filter algorithm does not guarantee bounded waiting.<SUP id=cite_ref-raynal_4-4 class=reference style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><A style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Peterson%27s_algorithm#cite_note-raynal-4"><FONT face=Arial>[4]</FONT></A></SUP><SUP class="reference nowrap" style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; FONT-WEIGHT: normal; FONT-STYLE: normal; LINE-HEIGHT: 1"><SPAN title="Page / location: 25&#8211;26"><FONT color=#202122 face=Arial>:&#8202;25&#8211;26&#8202;</FONT></SPAN></SUP></FONT></P>
<DIV class="mw-heading mw-heading2" style='FONT-SIZE: 1.5em; OVERFLOW: hidden; FONT-FAMILY: "Linux Libertine", Georgia, Times, "Source Serif Pro", serif; WHITE-SPACE: normal; WORD-SPACING: 0px; BORDER-BOTTOM: 1px solid; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: ; PADDING-BOTTOM: 0.17em; FONT-STYLE: normal; PADDING-TOP: 0.5em; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.25em 0px; LETTER-SPACING: normal; LINE-HEIGHT: 1.375; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><FONT class=extract>
<H2 id=Note style='OVERFLOW: hidden; BORDER-TOP: 0px; FONT-FAMILY: "Linux Libertine", Georgia, Times, "Source Serif Pro", serif; BORDER-RIGHT: 0px; BORDER-BOTTOM: 0px; COLOR: ; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; BORDER-LEFT: 0px; MARGIN: 0px 0px 0.25em; DISPLAY: inline; LINE-HEIGHT: 1.375; PADDING-RIGHT: 0px; font-stretch: inherit; font-optical-sizing: inherit; font-size-adjust: inherit; font-kerning: inherit; font-feature-settings: inherit; font-variation-settings: inherit'>Note</H2><SPAN class=mw-editsection style="FONT-SIZE: small; FONT-FAMILY: sans-serif; VERTICAL-ALIGN: baseline; FONT-WEIGHT: normal; MARGIN-LEFT: 1em; LINE-HEIGHT: 0; MARGIN-RIGHT: 0px; user-select: none"><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-RIGHT: 0.25em">[</SPAN><A title="Edit section: Note" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; WHITE-SPACE: nowrap; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/w/index.php?title=Peterson%27s_algorithm&amp;action=edit&amp;section=6"><SPAN>edit</SPAN></A><SPAN class=mw-editsection-bracket style="COLOR: ; MARGIN-LEFT: 0.25em">]</SPAN></SPAN></FONT></DIV>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>When working at the<SPAN>&nbsp;</SPAN></FONT><A title="Computer hardware" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Computer_hardware"><FONT class=extract>hardware</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>level, Peterson's algorithm is typically not needed to achieve atomic access. Some processors have special instructions, like<SPAN>&nbsp;</SPAN></FONT><A title=Test-and-set style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Test-and-set"><FONT class=extract>test-and-set</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>or<SPAN>&nbsp;</SPAN></FONT><A title=Compare-and-swap style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Compare-and-swap"><FONT class=extract>compare-and-swap</FONT></A><FONT class=extract>, which, by locking the memory bus, can be used to provide mutual exclusion in<SPAN>&nbsp;</SPAN></FONT><A title="Symmetric multiprocessing" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Symmetric_multiprocessing"><FONT class=extract>SMP</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>systems.</FONT></P>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>Most modern CPUs reorder memory accesses to improve execution efficiency (see<SPAN>&nbsp;</SPAN></FONT><A title="Memory ordering" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Memory_ordering"><FONT class=extract>memory ordering</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>for types of reordering allowed). Such processors invariably give some way to force ordering in a stream of memory accesses, typically through a<SPAN>&nbsp;</SPAN></FONT><A title="Memory barrier" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Memory_barrier"><FONT class=extract>memory barrier</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>instruction. Implementation of Peterson's and related algorithms on processors that reorder memory accesses generally requires use of such operations to work correctly to keep sequential operations from happening in an incorrect order. Note that reordering of memory accesses can happen even on processors that don't reorder instructions (such as the<SPAN>&nbsp;</SPAN></FONT><A title=PowerPC style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/PowerPC"><FONT class=extract>PowerPC</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>processor in the<SPAN>&nbsp;</SPAN></FONT><A title="Xbox 360" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Xbox_360"><FONT class=extract>Xbox 360</FONT></A><FONT class=extract>).<SUP class="noprint Inline-Template Template-Fact" style="FONT-SIZE: 12px; WHITE-SPACE: nowrap; LINE-HEIGHT: 1">[<I><A title="Wikipedia:Citation needed" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed"><SPAN title="This claim needs references to reliable sources. (May 2015)">citation needed</SPAN></A></I>]</SUP></FONT></P>
<P style="FONT-SIZE: 16px; FONT-FAMILY: sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(32,33,34); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; MARGIN: 0.5em 0px 1em; LETTER-SPACING: normal; BACKGROUND-COLOR: rgb(255,255,255); TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial"><FONT class=extract>Most such CPUs also have some sort of guaranteed<SPAN>&nbsp;</SPAN></FONT><A title="Atomic operation" class=mw-redirect style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Atomic_operation"><FONT class=extract>atomic operation</FONT></A><FONT class=extract>, such as<SPAN>&nbsp;</SPAN><CODE style="BORDER-TOP: 1px solid; FONT-FAMILY: monospace, monospace; BORDER-RIGHT: 1px solid; BORDER-BOTTOM: 1px solid; COLOR: ; PADDING-BOTTOM: 1px; PADDING-TOP: 1px; PADDING-LEFT: 4px; BORDER-LEFT: 1px solid; PADDING-RIGHT: 4px; border-radius: 2px">XCHG</CODE><SPAN>&nbsp;</SPAN>on<SPAN>&nbsp;</SPAN></FONT><A title=X86 style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/X86"><FONT class=extract>x86</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>processors and<SPAN>&nbsp;</SPAN></FONT><A title=Load-link/store-conditional style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/Load-link/store-conditional"><FONT class=extract>load-link/store-conditional</FONT></A><FONT class=extract><SPAN>&nbsp;</SPAN>on<SPAN>&nbsp;</SPAN></FONT><A title="DEC Alpha" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/DEC_Alpha"><FONT class=extract>Alpha</FONT></A><FONT class=extract>,<SPAN>&nbsp;</SPAN></FONT><A title="MIPS architecture" style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/MIPS_architecture"><FONT class=extract>MIPS</FONT></A><FONT class=extract>,<SPAN>&nbsp;</SPAN></FONT><A title=PowerPC style="TEXT-DECORATION: none; BACKGROUND: none transparent scroll repeat 0% 0%; COLOR: ; border-radius: 2px; overflow-wrap: break-word" href="https://en.wikipedia.org/wiki/PowerPC"><FONT class=extract>PowerPC</FONT></A><FONT class=extract>, and other architectures. These instructions are intended to provide a way to build synchronization primitives more efficiently than can be done with pure shared memory approaches.</FONT>