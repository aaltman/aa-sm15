<b> : </b>Aerospike circuit breaker in Java</H2>
<P style="BOX-SIZING: border-box; FONT-FAMILY: var(--desktop-large-body-copy-family); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(26,26,26); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">The Circuit Breaker pattern is enabled in the Aerospike Java client by default. However, you can tune the number of errors per<SPAN>&nbsp;</SPAN><A style='BOX-SIZING: border-box; CURSOR: pointer; TEXT-DECORATION: none; FONT-FAMILY: var(--helvetica, "Neue Helvetica Now Pro"),Helvetica; BORDER-BOTTOM: rgb(0,122,171) 1px solid; COLOR: ' href="https://discuss.aerospike.com/t/faq-what-is-the-tend-interval/7276">tend interval</A><SPAN>&nbsp;</SPAN>(approx. 1 second) to suit your use case.</P>
<P style="BOX-SIZING: border-box; FONT-FAMILY: var(--desktop-large-body-copy-family); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(26,26,26); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">For example, to reduce the threshold from the default value of 100 errors per second to 25 errors per second:</P><SECTION class=_codeSectionEmbedded_1u426_2 style='BOX-SIZING: border-box; FONT-SIZE: medium; FONT-FAMILY: "Neue Helvetica Now Pro", system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", sans-serif, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(26,26,26); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><PRE tabIndex=0 class="shiki material-theme" style='BOX-SIZING: border-box; OVERFLOW: auto; WHITE-SPACE: pre; COLOR: rgb(238,255,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/22px SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 20px; DISPLAY: block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(38,50,56); border-radius: 20px'><CODE style="BOX-SIZING: border-box; FONT-SIZE: 14px; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COUNTER-INCREMENT: step 0; PADDING-BOTTOM: 0px; PADDING-TOP: 0.5em; PADDING-LEFT: 0px; BORDER-LEFT: medium none; COUNTER-RESET: step 0; PADDING-RIGHT: 0px; border-radius: 0.4rem"><SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(247,140,108)">import</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)"> com</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">aerospike</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">client</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">IAerospikeClient</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">;</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(247,140,108)">import</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)"> com</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">aerospike</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">client</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">Host</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">;</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(247,140,108)">import</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)"> com</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">aerospike</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">client</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">policy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">ClientPolicy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">;</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(247,140,108)">import</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)"> com</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">aerospike</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">client</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">proxy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">AerospikeClientFactory</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">;</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">Host</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">[]</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> hosts </SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">=</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255); FONT-STYLE: italic"> new</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)"> Host</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">[]</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)"> {</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255); FONT-STYLE: italic">    new</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(130,170,255)"> Host</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">(</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">"</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(195,232,141)">127.0.0.1</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">"</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">,</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(247,140,108)"> 3000</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">),</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">};</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">ClientPolicy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> policy </SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">=</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255); FONT-STYLE: italic"> new</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(130,170,255)"> ClientPolicy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">();</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)">policy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)">maxErrorRate </SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">=</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(247,140,108)"> 25</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">;</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic"> // default=100</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(199,146,234)">IAerospikeClient</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> client </SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">=</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> AerospikeClientFactory</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(130,170,255)">getClient</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">(</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)">policy</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">,</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)"> false,</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> hosts</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">);</SPAN></SPAN></CODE></PRE></SECTION>
<P style="BOX-SIZING: border-box; FONT-FAMILY: var(--desktop-large-body-copy-family); WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(26,26,26); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial">The application would then handle the exceptions raised when the circuit breaker threshold has been tripped using the MAX_ERROR_RATE attribute of the ResultCode member of the exception:</P><SECTION class=_codeSectionEmbedded_1u426_2 style='BOX-SIZING: border-box; FONT-SIZE: medium; FONT-FAMILY: "Neue Helvetica Now Pro", system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", sans-serif, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(26,26,26); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><PRE tabIndex=0 class="shiki material-theme" style='BOX-SIZING: border-box; OVERFLOW: auto; WHITE-SPACE: pre; COLOR: rgb(238,255,255); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; FONT: 14px/22px SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; PADDING-LEFT: 0px; MARGIN: 0px 0px 20px; DISPLAY: block; PADDING-RIGHT: 0px; BACKGROUND-COLOR: rgb(38,50,56); border-radius: 20px'><CODE style="BOX-SIZING: border-box; FONT-SIZE: 14px; BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-BOTTOM: medium none; COUNTER-INCREMENT: step 0; PADDING-BOTTOM: 0px; PADDING-TOP: 0.5em; PADDING-LEFT: 0px; BORDER-LEFT: medium none; COUNTER-RESET: step 0; PADDING-RIGHT: 0px; border-radius: 0.4rem"><SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255); FONT-STYLE: italic">switch</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> (e</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(130,170,255)">getResultCode</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)">()) </SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">{</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic">    // ...</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255); FONT-STYLE: italic">    case</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)"> ResultCode</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">.</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(238,255,255)">MAX_ERROR_RATE</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">:</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic">        // Exceeded max number of errors per tend interval (~1s)</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic">        // The operation can be queued for retry with something like</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic">        // like an exponential backoff, captured in a dead letter</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic">        // queue, etc.</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255); FONT-STYLE: italic">        break</SPAN><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">;</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(84,110,122); FONT-STYLE: italic">    // ...</SPAN></SPAN>
<SPAN class=line style="BOX-SIZING: border-box"><SPAN style="BOX-SIZING: border-box; COLOR: rgb(137,221,255)">}</SPAN></SPAN></CODE></PRE></SECTION>