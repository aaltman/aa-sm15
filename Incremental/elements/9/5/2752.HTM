<b> : </b><STRONG style='BOX-SIZING: border-box; FONT-FAMILY: AmazonEmberBold, "Helvetica Neue Bold", "Helvetica Neue", Helvetica, Arial, sans-serif; FONT-WEIGHT: 500'>Observability with Amazon CloudWatch Metrics</STRONG></H2>
<P style='BOX-SIZING: border-box; FONT-SIZE: 14px; MARGIN-BOTTOM: 15px; FONT-FAMILY: AmazonEmber, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>For ALB,<SPAN>&nbsp;</SPAN><A style="BOX-SIZING: border-box; TEXT-DECORATION: underline; COLOR: rgb(9,114,211); OUTLINE-WIDTH: 0px; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; BACKGROUND-COLOR: transparent; text-underline-offset: 0.4rem" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-cloudwatch-metrics.html" rel=noopener target=_blank>CloudWatch metrics</A>, specifically the<SPAN>&nbsp;</SPAN><CODE style='BOX-SIZING: border-box; BORDER-TOP: rgb(247,247,247) 1px solid; FONT-FAMILY: Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace; BORDER-RIGHT: rgb(247,247,247) 1px solid; BORDER-BOTTOM: rgb(247,247,247) 1px solid; COLOR: rgb(192,57,43); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; BORDER-LEFT: rgb(247,247,247) 1px solid; DISPLAY: inline-block; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(247,247,247); border-radius: 0px'><A style="BOX-SIZING: border-box; TEXT-DECORATION: underline; COLOR: rgb(9,114,211); OUTLINE-WIDTH: 0px; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; BACKGROUND-COLOR: transparent; text-underline-offset: 0.4rem" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-cloudwatch-metrics.html" rel=noopener target=_blank>RequestCount</A></CODE><SPAN>&nbsp;</SPAN>can be used to monitor the result (before and after) of sharding. This metric shows the number of requests processed over IPv4 and IPv6. This metric is only incremented for requests where the load balancer node was able to choose a target. Requests that are rejected before a target is chosen are not reflected in this metric. Figure 7 below shows the ALB request distribution before sharding with ALB1 (blue line) receiving all the traffic and after sharding, with ALB2 (green line) taking 50% of the load thereby evenly distributing the traffic load.</P>
<P style='BOX-SIZING: border-box; FONT-SIZE: 14px; MARGIN-BOTTOM: 15px; FONT-FAMILY: AmazonEmber, "Helvetica Neue", Helvetica, Arial, sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; MARGIN-TOP: 15px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; PADDING-TOP: 5px; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>To monitor the current amount of bytes processed by your NLB, we recommend to monitor the<SPAN>&nbsp;</SPAN><CODE style='BOX-SIZING: border-box; BORDER-TOP: rgb(247,247,247) 1px solid; FONT-FAMILY: Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace; BORDER-RIGHT: rgb(247,247,247) 1px solid; BORDER-BOTTOM: rgb(247,247,247) 1px solid; COLOR: rgb(192,57,43); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; BORDER-LEFT: rgb(247,247,247) 1px solid; DISPLAY: inline-block; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(247,247,247); border-radius: 0px'>ProcessedBytes</CODE>,<SPAN>&nbsp;</SPAN><CODE style='BOX-SIZING: border-box; BORDER-TOP: rgb(247,247,247) 1px solid; FONT-FAMILY: Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace; BORDER-RIGHT: rgb(247,247,247) 1px solid; BORDER-BOTTOM: rgb(247,247,247) 1px solid; COLOR: rgb(192,57,43); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; BORDER-LEFT: rgb(247,247,247) 1px solid; DISPLAY: inline-block; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(247,247,247); border-radius: 0px'>ProcessedBytes_TCP</CODE>,<SPAN>&nbsp;</SPAN><CODE style='BOX-SIZING: border-box; BORDER-TOP: rgb(247,247,247) 1px solid; FONT-FAMILY: Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace; BORDER-RIGHT: rgb(247,247,247) 1px solid; BORDER-BOTTOM: rgb(247,247,247) 1px solid; COLOR: rgb(192,57,43); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; BORDER-LEFT: rgb(247,247,247) 1px solid; DISPLAY: inline-block; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(247,247,247); border-radius: 0px'>ProcessedBytes_TLS</CODE>, and<SPAN>&nbsp;</SPAN><CODE style='BOX-SIZING: border-box; BORDER-TOP: rgb(247,247,247) 1px solid; FONT-FAMILY: Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace; BORDER-RIGHT: rgb(247,247,247) 1px solid; BORDER-BOTTOM: rgb(247,247,247) 1px solid; COLOR: rgb(192,57,43); PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 5px; BORDER-LEFT: rgb(247,247,247) 1px solid; DISPLAY: inline-block; PADDING-RIGHT: 5px; BACKGROUND-COLOR: rgb(247,247,247); border-radius: 0px'>ProcessedBytes_UDP</CODE><SPAN>&nbsp;</SPAN>CloudWatch metrics depending upon the listener configured on your NLB.</P>
<DIV id=attachment_21586 class="wp-caption alignnone" style='BOX-SIZING: border-box; FONT-SIZE: 14px; MAX-WIDTH: 100%; FONT-FAMILY: AmazonEmber, "Helvetica Neue", Helvetica, Arial, sans-serif; WIDTH: 2866px; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(51,51,51); FONT-STYLE: normal; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'><A style="BOX-SIZING: border-box; TEXT-DECORATION: underline; COLOR: rgb(9,114,211); OUTLINE-WIDTH: 0px; OUTLINE-STYLE: none; OUTLINE-COLOR: invert; BACKGROUND-COLOR: transparent; text-underline-offset: 0.4rem" href="https://d2908q01vomqb2.cloudfront.net/5b384ce32d8cdef02bc3a139d4cac0a22bb029e8/2024/05/02/ELBShardingFig8-1.png" rel=noopener target=_blank><IMG aria-describedby=caption-attachment-21586 class="wp-image-21586 size-full" style="BOX-SIZING: border-box; MAX-WIDTH: 100%; BORDER-TOP: 0px; HEIGHT: auto; BORDER-RIGHT: 0px; WIDTH: auto; BORDER-BOTTOM: 0px; BORDER-LEFT: 0px" alt="" src="https://d2908q01vomqb2.cloudfront.net/5b384ce32d8cdef02bc3a139d4cac0a22bb029e8/2024/05/02/ELBShardingFig8-1.png" width=2856 height=1108 loading="lazy"></A>
<P id=caption-attachment-21586 class=wp-caption-text style="BOX-SIZING: border-box; MARGIN-TOP: 0px; COLOR: rgb(35,47,62); FONT-STYLE: italic">Figure 8: CloudWatch RequestCount metric showing the before/after results of ALB sharding</P></DIV>