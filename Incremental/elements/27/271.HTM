<b> : </b>67.4.1.&nbsp;B-Tree Structure<SPAN>&nbsp;</SPAN><A class=id_link style="BOX-SIZING: border-box; TEXT-DECORATION: none; FONT-WEIGHT: 600; COLOR: ; VISIBILITY: hidden; BACKGROUND-COLOR: transparent; transition: color 0.2s ease-in-out" href="https://www.postgresql.org/docs/current/btree-implementation.html#BTREE-STRUCTURE"></A></H3></DIV></DIV></DIV>
<P style="BOX-SIZING: border-box; MARGIN-TOP: 0px"><SPAN class=productname style="BOX-SIZING: border-box">PostgreSQL</SPAN><SPAN>&nbsp;</SPAN>B-Tree indexes are multi-level tree structures, where each level of the tree can be used as a doubly-linked list of pages. A single metapage is stored in a fixed position at the start of the first segment file of the index. All other pages are either leaf pages or internal pages. Leaf pages are the pages on the lowest level of the tree. All other levels consist of internal pages. Each leaf page contains tuples that point to table rows. Each internal page contains tuples that point to the next level down in the tree. Typically, over 99% of all pages are leaf pages. Both internal pages and leaf pages use the standard page format described in<SPAN>&nbsp;</SPAN><A title="73.6.&nbsp;Database Page Layout" class=xref style="BOX-SIZING: border-box; TEXT-DECORATION: none; FONT-WEIGHT: 600; COLOR: ; BACKGROUND-COLOR: transparent; transition: color 0.2s ease-in-out" href="https://www.postgresql.org/docs/current/storage-page-layout.html">Section&nbsp;73.6</A>.</P>
<P style="BOX-SIZING: border-box; MARGIN-TOP: 0px">New leaf pages are added to a B-Tree index when an existing leaf page cannot fit an incoming tuple. A<SPAN>&nbsp;</SPAN><EM class=firstterm style="BOX-SIZING: border-box; FONT-STYLE: italic">page split</EM><SPAN>&nbsp;</SPAN>operation makes room for items that originally belonged on the overflowing page by moving a portion of the items to a new page. Page splits must also insert a new<SPAN>&nbsp;</SPAN><EM class=firstterm style="BOX-SIZING: border-box; FONT-STYLE: italic">downlink</EM><SPAN>&nbsp;</SPAN>to the new page in the parent page, which may cause the parent to split in turn. Page splits<SPAN>&nbsp;</SPAN><SPAN class=quote style="BOX-SIZING: border-box">&#8220;<SPAN class=quote style="BOX-SIZING: border-box">cascade upwards</SPAN>&#8221;</SPAN><SPAN>&nbsp;</SPAN>in a recursive fashion. When the root page finally cannot fit a new downlink, a<SPAN>&nbsp;</SPAN><EM class=firstterm style="BOX-SIZING: border-box; FONT-STYLE: italic">root page split</EM><SPAN>&nbsp;</SPAN>operation takes place. This adds a new level to the tree structure by creating a new root page that is one level above the original root page.</P></DIV>
<DIV id=BTREE-DELETION class=sect2 style='BOX-SIZING: border-box; FONT-SIZE: 14px; FONT-FAMILY: "Open Sans", sans-serif; WHITE-SPACE: normal; WORD-SPACING: 0px; TEXT-TRANSFORM: none; FONT-WEIGHT: 400; COLOR: rgb(0,0,0); FONT-STYLE: normal; TEXT-ALIGN: left; ORPHANS: 2; WIDOWS: 2; LETTER-SPACING: normal; TEXT-INDENT: 0px; font-variant-ligatures: normal; font-variant-caps: normal; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial'>
<DIV class=titlepage style="BOX-SIZING: border-box">
<DIV style="BOX-SIZING: border-box">
<DIV style="BOX-SIZING: border-box">